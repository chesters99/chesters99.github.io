{"pages":[{"loc":"http://blog.gchester.com/pages/about.html","title":"ABOUT","url":"http://blog.gchester.com/pages/about.html","tags":"pages","text":"Thank you for visiting! Welcome to my blog, where I try to relate experiences and learnings in Data Science and the Python world. In July 2016 I quit a well paying job at a major consultancy as a financial systems consultant with the intent to retrain in data science. Throughout my career I've enjoyed analysing data, and now seemed the time to do something serious about it. Still a way to go yet though... Update Dec 2016 - Just started a Masters in Data Science at Monash University, Melbourne."},{"loc":"http://blog.gchester.com/cheat-sheets.html","title":"Collection of Python Data Science Cheat Sheets","url":"http://blog.gchester.com/cheat-sheets.html","tags":"Data Science","text":"Collected from around the web, Datacamp, Pandas github etc, and stored here for preservation as links/versions move around. Pandas Cheat Sheet ( pdf ) Numpy Cheat Sheet ( pdf ) Matplotlib Cheat Sheet ( pdf ) Scipy Cheat Sheet ( pdf ) Scikit-Learn Cheat Sheet ( pdf ) Pyspark Cheat Sheet ( pdf ) Keras Cheat Sheet click ( pdf )"},{"loc":"http://blog.gchester.com/pymc3.html","title":"Experimenting with Bayesian Inference via PYMC3","url":"http://blog.gchester.com/pymc3.html","tags":"Data Science","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI colors. */ .ansibold { font-weight: bold; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; border-left-width: 1px; padding-left: 5px; background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%); } div.cell.jupyter-soft-selected { border-left-color: #90CAF9; border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected { border-color: #ababab; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%); } @media print { div.cell.selected { border-color: transparent; } } div.cell.selected.jupyter-soft-selected { border-left-width: 0; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%); } .edit_mode div.cell.selected { border-color: #66BB6A; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%); } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } @-moz-document url-prefix() { div.inner_cell { overflow-x: hidden; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ padding: 0.4em; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */ /* .CodeMirror-lines */ padding: 0; border: 0; border-radius: 0; } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html td, .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } .highlight .hll { background-color: #ffffcc } .highlight { background: #f8f8f8; } .highlight .c { color: #408080; font-style: italic } /* Comment */ .highlight .err { border: 1px solid #FF0000 } /* Error */ .highlight .k { color: #008000; font-weight: bold } /* Keyword */ .highlight .o { color: #666666 } /* Operator */ .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight .gd { color: #A00000 } /* Generic.Deleted */ .highlight .ge { font-style: italic } /* Generic.Emph */ .highlight .gr { color: #FF0000 } /* Generic.Error */ .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight .gi { color: #00A000 } /* Generic.Inserted */ .highlight .go { color: #888888 } /* Generic.Output */ .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight .gs { font-weight: bold } /* Generic.Strong */ .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight .gt { color: #0044DD } /* Generic.Traceback */ .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight .kp { color: #008000 } /* Keyword.Pseudo */ .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight .kt { color: #B00040 } /* Keyword.Type */ .highlight .m { color: #666666 } /* Literal.Number */ .highlight .s { color: #BA2121 } /* Literal.String */ .highlight .na { color: #7D9029 } /* Name.Attribute */ .highlight .nb { color: #008000 } /* Name.Builtin */ .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight .no { color: #880000 } /* Name.Constant */ .highlight .nd { color: #AA22FF } /* Name.Decorator */ .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight .nf { color: #0000FF } /* Name.Function */ .highlight .nl { color: #A0A000 } /* Name.Label */ .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight .nv { color: #19177C } /* Name.Variable */ .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight .w { color: #bbbbbb } /* Text.Whitespace */ .highlight .mb { color: #666666 } /* Literal.Number.Bin */ .highlight .mf { color: #666666 } /* Literal.Number.Float */ .highlight .mh { color: #666666 } /* Literal.Number.Hex */ .highlight .mi { color: #666666 } /* Literal.Number.Integer */ .highlight .mo { color: #666666 } /* Literal.Number.Oct */ .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight .sc { color: #BA2121 } /* Literal.String.Char */ .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight .sx { color: #008000 } /* Literal.String.Other */ .highlight .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight .ss { color: #19177C } /* Literal.String.Symbol */ .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight .vc { color: #19177C } /* Name.Variable.Class */ .highlight .vg { color: #19177C } /* Name.Variable.Global */ .highlight .vi { color: #19177C } /* Name.Variable.Instance */ .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */ /* Temporary definitions which will become obsolete with Notebook release 5.0 */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-bold { font-weight: bold; } In [3]: import pymc3 as pm import seaborn as sns import matplotlib.pyplot as plt import numpy as np import pandas as pd from scipy import stats import theano as th th . config . warn . round = False % matplotlib inline from IPython.core.interactiveshell import InteractiveShell InteractiveShell . ast_node_interactivity = \"all\" pd . set_option ( \"display.width\" , 110 ) pd . set_option ( \"display.max_columns\" , 12 ) np . set_printoptions ( linewidth = 110 , edgeitems = 6 , suppress = True ) In [2]: data = np . array ([ 51.06 , 55.12 , 53.73 , 50.24 , 52.05 , 56.40 , 48.45 , 52.34 , 55.65 , 51.49 , 51.86 , 63.43 , 53.00 , 56.09 , 51.93 , 52.31 , 52.33 , 57.48 , 57.44 , 55.14 , 53.93 , 54.62 , 56.09 , 68.58 , 51.36 , 55.47 , 50.73 , 51.94 , 54.95 , 50.39 , 52.91 , 51.5 , 52.68 , 47.72 , 49.73 , 51.82 , 54.99 , 52.84 , 53.19 , 54.52 , 51.46 , 53.73 , 51.61 , 49.81 , 52.42 , 54.3 , 53.84 , 53.16 ]) . astype ( np . float32 ) data = data / 5 _ = sns . kdeplot ( data ) /Users/graham/anaconda/lib/python3.5/site-packages/statsmodels/nonparametric/kdetools.py:20: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future y = X[:m/2+1] + np.r_[0,X[m/2+1:],0]*1j General Experimenting In [3]: # general experimenting from PYMC3 API quickstart with pm . Model () as model : mu = pm . Normal ( 'mu' , mu = 0 , sd = 50 , testval = 0.1 ) plus_2 = pm . Deterministic ( 'mu plus 2' , mu + 2 ) x = pm . Uniform ( 'x' , lower = 0 , upper = 1 ) xx = pm . Normal ( 'xx' , mu = 0 , sd = 1 , shape = 5 ) obs = pm . Normal ( 'obs' , mu = mu , sd = 1 , observed = data ) model . basic_RVs , model . observed_RVs , model . free_RVs , model . deterministics model . named_vars #model.logp({'mu': 0}) mu . random ( size = 3 ) xx . random ( size = 3 ) Out[3]: ([mu, x_interval__, xx, obs], [obs], [mu, x_interval__, xx], [mu plus 2, x]) Out[3]: {'mu': mu, 'mu plus 2': mu plus 2, 'obs': obs, 'x_interval__': x_interval__, 'xx': xx} Out[3]: array([-57.16537171, 8.2865051 , -20.29619937]) Out[3]: array([[-0.40803731, -1.26768239, -0.50392692, -0.55405493, -0.55611535], [-0.71291931, 1.02684142, 0.44666301, -0.3015636 , -0.14790859], [ 0.14269815, 1.14211246, 1.09377286, 0.10118101, -1.76370341]]) In [4]: # live plotting of inference % matplotlib notebook with model : trace = pm . sample ( 2000 , njobs = 4 , n_init = 80000 , live_plot = True , refresh_every = 500 , roll_over = 1000 ) % matplotlib inline trace [ 'mu' ] . shape trace . nchains trace . get_values ( 'mu' , chains = 1 ) . shape Auto-assigning NUTS sampler... Initializing NUTS using ADVI... Average Loss = 61.885: 44%|████▍ | 35248/80000 [00:03<00:04, 9548.72it/s] Convergence archived at 35700 Interrupted at 35,700 [44%]: Average Loss = 912.99 0%| | 0/2500 [00:00 var element = $('#abf68884-5f93-42d5-944f-a9406d91036f'); /* Put everything inside the global mpl namespace */ window.mpl = {}; mpl.get_websocket_type = function() { if (typeof(WebSocket) !== 'undefined') { return WebSocket; } else if (typeof(MozWebSocket) !== 'undefined') { return MozWebSocket; } else { alert('Your browser does not have WebSocket support.' + 'Please try Chrome, Safari or Firefox ≥ 6. ' + 'Firefox 4 and 5 are also supported but you ' + 'have to enable WebSockets in about:config.'); }; } mpl.figure = function(figure_id, websocket, ondownload, parent_element) { this.id = figure_id; this.ws = websocket; this.supports_binary = (this.ws.binaryType != undefined); if (!this.supports_binary) { var warnings = document.getElementById(\"mpl-warnings\"); if (warnings) { warnings.style.display = 'block'; warnings.textContent = ( \"This browser does not support binary websocket messages. \" + \"Performance may be slow.\"); } } this.imageObj = new Image(); this.context = undefined; this.message = undefined; this.canvas = undefined; this.rubberband_canvas = undefined; this.rubberband_context = undefined; this.format_dropdown = undefined; this.image_mode = 'full'; this.root = $('<div/>'); this._root_extra_style(this.root) this.root.attr('style', 'display: inline-block'); $(parent_element).append(this.root); this._init_header(this); this._init_canvas(this); this._init_toolbar(this); var fig = this; this.waiting = false; this.ws.onopen = function () { fig.send_message(\"supports_binary\", {value: fig.supports_binary}); fig.send_message(\"send_image_mode\", {}); if (mpl.ratio != 1) { fig.send_message(\"set_dpi_ratio\", {'dpi_ratio': mpl.ratio}); } fig.send_message(\"refresh\", {}); } this.imageObj.onload = function() { if (fig.image_mode == 'full') { // Full images could contain transparency (where diff images // almost always do), so we need to clear the canvas so that // there is no ghosting. fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height); } fig.context.drawImage(fig.imageObj, 0, 0); }; this.imageObj.onunload = function() { this.ws.close(); } this.ws.onmessage = this._make_on_message_function(this); this.ondownload = ondownload; } mpl.figure.prototype._init_header = function() { var titlebar = $( '<div class=\"ui-dialog-titlebar ui-widget-header ui-corner-all ' + 'ui-helper-clearfix\"/>'); var titletext = $( '<div class=\"ui-dialog-title\" style=\"width: 100%; ' + 'text-align: center; padding: 3px;\"/>'); titlebar.append(titletext) this.root.append(titlebar); this.header = titletext[0]; } mpl.figure.prototype._canvas_extra_style = function(canvas_div) { } mpl.figure.prototype._root_extra_style = function(canvas_div) { } mpl.figure.prototype._init_canvas = function() { var fig = this; var canvas_div = $('<div/>'); canvas_div.attr('style', 'position: relative; clear: both; outline: 0'); function canvas_keyboard_event(event) { return fig.key_event(event, event['data']); } canvas_div.keydown('key_press', canvas_keyboard_event); canvas_div.keyup('key_release', canvas_keyboard_event); this.canvas_div = canvas_div this._canvas_extra_style(canvas_div) this.root.append(canvas_div); var canvas = $('<canvas/>'); canvas.addClass('mpl-canvas'); canvas.attr('style', \"left: 0; top: 0; z-index: 0; outline: 0\") this.canvas = canvas[0]; this.context = canvas[0].getContext(\"2d\"); var backingStore = this.context.backingStorePixelRatio || this.context.webkitBackingStorePixelRatio || this.context.mozBackingStorePixelRatio || this.context.msBackingStorePixelRatio || this.context.oBackingStorePixelRatio || this.context.backingStorePixelRatio || 1; mpl.ratio = (window.devicePixelRatio || 1) / backingStore; var rubberband = $('<canvas/>'); rubberband.attr('style', \"position: absolute; left: 0; top: 0; z-index: 1;\") var pass_mouse_events = true; canvas_div.resizable({ start: function(event, ui) { pass_mouse_events = false; }, resize: function(event, ui) { fig.request_resize(ui.size.width, ui.size.height); }, stop: function(event, ui) { pass_mouse_events = true; fig.request_resize(ui.size.width, ui.size.height); }, }); function mouse_event_fn(event) { if (pass_mouse_events) return fig.mouse_event(event, event['data']); } rubberband.mousedown('button_press', mouse_event_fn); rubberband.mouseup('button_release', mouse_event_fn); // Throttle sequential mouse events to 1 every 20ms. rubberband.mousemove('motion_notify', mouse_event_fn); rubberband.mouseenter('figure_enter', mouse_event_fn); rubberband.mouseleave('figure_leave', mouse_event_fn); canvas_div.on(\"wheel\", function (event) { event = event.originalEvent; event['data'] = 'scroll' if (event.deltaY < 0) { event.step = 1; } else { event.step = -1; } mouse_event_fn(event); }); canvas_div.append(canvas); canvas_div.append(rubberband); this.rubberband = rubberband; this.rubberband_canvas = rubberband[0]; this.rubberband_context = rubberband[0].getContext(\"2d\"); this.rubberband_context.strokeStyle = \"#000000\"; this._resize_canvas = function(width, height) { // Keep the size of the canvas, canvas container, and rubber band // canvas in synch. canvas_div.css('width', width) canvas_div.css('height', height) canvas.attr('width', width * mpl.ratio); canvas.attr('height', height * mpl.ratio); canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;'); rubberband.attr('width', width); rubberband.attr('height', height); } // Set the figure to an initial 600x600px, this will subsequently be updated // upon first draw. this._resize_canvas(600, 600); // Disable right mouse context menu. $(this.rubberband_canvas).bind(\"contextmenu\",function(e){ return false; }); function set_focus () { canvas.focus(); canvas_div.focus(); } window.setTimeout(set_focus, 100); } mpl.figure.prototype._init_toolbar = function() { var fig = this; var nav_element = $('<div/>') nav_element.attr('style', 'width: 100%'); this.root.append(nav_element); // Define a callback function for later on. function toolbar_event(event) { return fig.toolbar_button_onclick(event['data']); } function toolbar_mouse_event(event) { return fig.toolbar_button_onmouseover(event['data']); } for(var toolbar_ind in mpl.toolbar_items) { var name = mpl.toolbar_items[toolbar_ind][0]; var tooltip = mpl.toolbar_items[toolbar_ind][1]; var image = mpl.toolbar_items[toolbar_ind][2]; var method_name = mpl.toolbar_items[toolbar_ind][3]; if (!name) { // put a spacer in here. continue; } var button = $('<button/>'); button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' + 'ui-button-icon-only'); button.attr('role', 'button'); button.attr('aria-disabled', 'false'); button.click(method_name, toolbar_event); button.mouseover(tooltip, toolbar_mouse_event); var icon_img = $('<span/>'); icon_img.addClass('ui-button-icon-primary ui-icon'); icon_img.addClass(image); icon_img.addClass('ui-corner-all'); var tooltip_span = $('<span/>'); tooltip_span.addClass('ui-button-text'); tooltip_span.html(tooltip); button.append(icon_img); button.append(tooltip_span); nav_element.append(button); } var fmt_picker_span = $('<span/>'); var fmt_picker = $('<select/>'); fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content'); fmt_picker_span.append(fmt_picker); nav_element.append(fmt_picker_span); this.format_dropdown = fmt_picker[0]; for (var ind in mpl.extensions) { var fmt = mpl.extensions[ind]; var option = $( '<option/>', {selected: fmt === mpl.default_extension}).html(fmt); fmt_picker.append(option) } // Add hover states to the ui-buttons $( \".ui-button\" ).hover( function() { $(this).addClass(\"ui-state-hover\");}, function() { $(this).removeClass(\"ui-state-hover\");} ); var status_bar = $('<span class=\"mpl-message\"/>'); nav_element.append(status_bar); this.message = status_bar[0]; } mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) { // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client, // which will in turn request a refresh of the image. this.send_message('resize', {'width': x_pixels, 'height': y_pixels}); } mpl.figure.prototype.send_message = function(type, properties) { properties['type'] = type; properties['figure_id'] = this.id; this.ws.send(JSON.stringify(properties)); } mpl.figure.prototype.send_draw_message = function() { if (!this.waiting) { this.waiting = true; this.ws.send(JSON.stringify({type: \"draw\", figure_id: this.id})); } } mpl.figure.prototype.handle_save = function(fig, msg) { var format_dropdown = fig.format_dropdown; var format = format_dropdown.options[format_dropdown.selectedIndex].value; fig.ondownload(fig, format); } mpl.figure.prototype.handle_resize = function(fig, msg) { var size = msg['size']; if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) { fig._resize_canvas(size[0], size[1]); fig.send_message(\"refresh\", {}); }; } mpl.figure.prototype.handle_rubberband = function(fig, msg) { var x0 = msg['x0'] / mpl.ratio; var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio; var x1 = msg['x1'] / mpl.ratio; var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio; x0 = Math.floor(x0) + 0.5; y0 = Math.floor(y0) + 0.5; x1 = Math.floor(x1) + 0.5; y1 = Math.floor(y1) + 0.5; var min_x = Math.min(x0, x1); var min_y = Math.min(y0, y1); var width = Math.abs(x1 - x0); var height = Math.abs(y1 - y0); fig.rubberband_context.clearRect( 0, 0, fig.canvas.width, fig.canvas.height); fig.rubberband_context.strokeRect(min_x, min_y, width, height); } mpl.figure.prototype.handle_figure_label = function(fig, msg) { // Updates the figure title. fig.header.textContent = msg['label']; } mpl.figure.prototype.handle_cursor = function(fig, msg) { var cursor = msg['cursor']; switch(cursor) { case 0: cursor = 'pointer'; break; case 1: cursor = 'default'; break; case 2: cursor = 'crosshair'; break; case 3: cursor = 'move'; break; } fig.rubberband_canvas.style.cursor = cursor; } mpl.figure.prototype.handle_message = function(fig, msg) { fig.message.textContent = msg['message']; } mpl.figure.prototype.handle_draw = function(fig, msg) { // Request the server to send over a new figure. fig.send_draw_message(); } mpl.figure.prototype.handle_image_mode = function(fig, msg) { fig.image_mode = msg['mode']; } mpl.figure.prototype.updated_canvas_event = function() { // Called whenever the canvas gets updated. this.send_message(\"ack\", {}); } // A function to construct a web socket function for onmessage handling. // Called in the figure constructor. mpl.figure.prototype._make_on_message_function = function(fig) { return function socket_on_message(evt) { if (evt.data instanceof Blob) { /* FIXME: We get \"Resource interpreted as Image but * transferred with MIME type text/plain:\" errors on * Chrome. But how to set the MIME type? It doesn't seem * to be part of the websocket stream */ evt.data.type = \"image/png\"; /* Free the memory for the previous frames */ if (fig.imageObj.src) { (window.URL || window.webkitURL).revokeObjectURL( fig.imageObj.src); } fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL( evt.data); fig.updated_canvas_event(); fig.waiting = false; return; } else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == \"data:image/png;base64\") { fig.imageObj.src = evt.data; fig.updated_canvas_event(); fig.waiting = false; return; } var msg = JSON.parse(evt.data); var msg_type = msg['type']; // Call the \"handle_{type}\" callback, which takes // the figure and JSON message as its only arguments. try { var callback = fig[\"handle_\" + msg_type]; } catch (e) { console.log(\"No handler for the '\" + msg_type + \"' message type: \", msg); return; } if (callback) { try { // console.log(\"Handling '\" + msg_type + \"' message: \", msg); callback(fig, msg); } catch (e) { console.log(\"Exception inside the 'handler_\" + msg_type + \"' callback:\", e, e.stack, msg); } } }; } // from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas mpl.findpos = function(e) { //this section is from http://www.quirksmode.org/js/events_properties.html var targ; if (!e) e = window.event; if (e.target) targ = e.target; else if (e.srcElement) targ = e.srcElement; if (targ.nodeType == 3) // defeat Safari bug targ = targ.parentNode; // jQuery normalizes the pageX and pageY // pageX,Y are the mouse positions relative to the document // offset() returns the position of the element relative to the document var x = e.pageX - $(targ).offset().left; var y = e.pageY - $(targ).offset().top; return {\"x\": x, \"y\": y}; }; /* * return a copy of an object with only non-object keys * we need this to avoid circular references * http://stackoverflow.com/a/24161582/3208463 */ function simpleKeys (original) { return Object.keys(original).reduce(function (obj, key) { if (typeof original[key] !== 'object') obj[key] = original[key] return obj; }, {}); } mpl.figure.prototype.mouse_event = function(event, name) { var canvas_pos = mpl.findpos(event) if (name === 'button_press') { this.canvas.focus(); this.canvas_div.focus(); } var x = canvas_pos.x * mpl.ratio; var y = canvas_pos.y * mpl.ratio; this.send_message(name, {x: x, y: y, button: event.button, step: event.step, guiEvent: simpleKeys(event)}); /* This prevents the web browser from automatically changing to * the text insertion cursor when the button is pressed. We want * to control all of the cursor setting manually through the * 'cursor' event from matplotlib */ event.preventDefault(); return false; } mpl.figure.prototype._key_event_extra = function(event, name) { // Handle any extra behaviour associated with a key event } mpl.figure.prototype.key_event = function(event, name) { // Prevent repeat events if (name == 'key_press') { if (event.which === this._key) return; else this._key = event.which; } if (name == 'key_release') this._key = null; var value = ''; if (event.ctrlKey && event.which != 17) value += \"ctrl+\"; if (event.altKey && event.which != 18) value += \"alt+\"; if (event.shiftKey && event.which != 16) value += \"shift+\"; value += 'k'; value += event.which.toString(); this._key_event_extra(event, name); this.send_message(name, {key: value, guiEvent: simpleKeys(event)}); return false; } mpl.figure.prototype.toolbar_button_onclick = function(name) { if (name == 'download') { this.handle_save(this, null); } else { this.send_message(\"toolbar_button\", {name: name}); } }; mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) { this.message.textContent = tooltip; }; mpl.toolbar_items = [[\"Home\", \"Reset original view\", \"fa fa-home icon-home\", \"home\"], [\"Back\", \"Back to previous view\", \"fa fa-arrow-left icon-arrow-left\", \"back\"], [\"Forward\", \"Forward to next view\", \"fa fa-arrow-right icon-arrow-right\", \"forward\"], [\"\", \"\", \"\", \"\"], [\"Pan\", \"Pan axes with left mouse, zoom with right\", \"fa fa-arrows icon-move\", \"pan\"], [\"Zoom\", \"Zoom to rectangle\", \"fa fa-square-o icon-check-empty\", \"zoom\"], [\"\", \"\", \"\", \"\"], [\"Download\", \"Download plot\", \"fa fa-floppy-o icon-save\", \"download\"]]; mpl.extensions = [\"eps\", \"jpeg\", \"pdf\", \"png\", \"ps\", \"raw\", \"svg\", \"tif\"]; mpl.default_extension = \"png\";var comm_websocket_adapter = function(comm) { // Create a \"websocket\"-like object which calls the given IPython comm // object with the appropriate methods. Currently this is a non binary // socket, so there is still some room for performance tuning. var ws = {}; ws.close = function() { comm.close() }; ws.send = function(m) { //console.log('sending', m); comm.send(m); }; // Register the callback with on_msg. comm.on_msg(function(msg) { //console.log('receiving', msg['content']['data'], msg); // Pass the mpl event to the overriden (by mpl) onmessage function. ws.onmessage(msg['content']['data']) }); return ws; } mpl.mpl_figure_comm = function(comm, msg) { // This is the function which gets called when the mpl process // starts-up an IPython Comm through the \"matplotlib\" channel. var id = msg.content.data.id; // Get hold of the div created by the display call when the Comm // socket was opened in Python. var element = $(\"#\" + id); var ws_proxy = comm_websocket_adapter(comm) function ondownload(figure, format) { window.open(figure.imageObj.src); } var fig = new mpl.figure(id, ws_proxy, ondownload, element.get(0)); // Call onopen now - mpl needs it, as it is assuming we've passed it a real // web socket which is closed, not our websocket->open comm proxy. ws_proxy.onopen(); fig.parent_element = element.get(0); fig.cell_info = mpl.find_output_cell(\"<div id='\" + id + \"'></div>\"); if (!fig.cell_info) { console.error(\"Failed to find cell for figure\", id, fig); return; } var output_index = fig.cell_info[2] var cell = fig.cell_info[0]; }; mpl.figure.prototype.handle_close = function(fig, msg) { var width = fig.canvas.width/mpl.ratio fig.root.unbind('remove') // Update the output cell to use the data from the current canvas. fig.push_to_output(); var dataURL = fig.canvas.toDataURL(); // Re-enable the keyboard manager in IPython - without this line, in FF, // the notebook keyboard shortcuts fail. IPython.keyboard_manager.enable() $(fig.parent_element).html('<img src=\"' + dataURL + '\" width=\"' + width + '\">'); fig.close_ws(fig, msg); } mpl.figure.prototype.close_ws = function(fig, msg){ fig.send_message('closing', msg); // fig.ws.close() } mpl.figure.prototype.push_to_output = function(remove_interactive) { // Turn the data on the canvas into data in the output cell. var width = this.canvas.width/mpl.ratio var dataURL = this.canvas.toDataURL(); this.cell_info[1]['text/html'] = '<img src=\"' + dataURL + '\" width=\"' + width + '\">'; } mpl.figure.prototype.updated_canvas_event = function() { // Tell IPython that the notebook contents must change. IPython.notebook.set_dirty(true); this.send_message(\"ack\", {}); var fig = this; // Wait a second, then push the new image to the DOM so // that it is saved nicely (might be nice to debounce this). setTimeout(function () { fig.push_to_output() }, 1000); } mpl.figure.prototype._init_toolbar = function() { var fig = this; var nav_element = $('<div/>') nav_element.attr('style', 'width: 100%'); this.root.append(nav_element); // Define a callback function for later on. function toolbar_event(event) { return fig.toolbar_button_onclick(event['data']); } function toolbar_mouse_event(event) { return fig.toolbar_button_onmouseover(event['data']); } for(var toolbar_ind in mpl.toolbar_items){ var name = mpl.toolbar_items[toolbar_ind][0]; var tooltip = mpl.toolbar_items[toolbar_ind][1]; var image = mpl.toolbar_items[toolbar_ind][2]; var method_name = mpl.toolbar_items[toolbar_ind][3]; if (!name) { continue; }; var button = $('<button class=\"btn btn-default\" href=\"#\" title=\"' + name + '\"><i class=\"fa ' + image + ' fa-lg\"></i></button>'); button.click(method_name, toolbar_event); button.mouseover(tooltip, toolbar_mouse_event); nav_element.append(button); } // Add the status bar. var status_bar = $('<span class=\"mpl-message\" style=\"text-align:right; float: right;\"/>'); nav_element.append(status_bar); this.message = status_bar[0]; // Add the close button to the window. var buttongrp = $('<div class=\"btn-group inline pull-right\"></div>'); var button = $('<button class=\"btn btn-mini btn-primary\" href=\"#\" title=\"Stop Interaction\"><i class=\"fa fa-power-off icon-remove icon-large\"></i></button>'); button.click(function (evt) { fig.handle_close(fig, {}); } ); button.mouseover('Stop Interaction', toolbar_mouse_event); buttongrp.append(button); var titlebar = this.root.find($('.ui-dialog-titlebar')); titlebar.prepend(buttongrp); } mpl.figure.prototype._root_extra_style = function(el){ var fig = this el.on(\"remove\", function(){ fig.close_ws(fig, {}); }); } mpl.figure.prototype._canvas_extra_style = function(el){ // this is important to make the div 'focusable el.attr('tabindex', 0) // reach out to IPython and tell the keyboard manager to turn it's self // off when our div gets focus // location in version 3 if (IPython.notebook.keyboard_manager) { IPython.notebook.keyboard_manager.register_events(el); } else { // location in version 2 IPython.keyboard_manager.register_events(el); } } mpl.figure.prototype._key_event_extra = function(event, name) { var manager = IPython.notebook.keyboard_manager; if (!manager) manager = IPython.keyboard_manager; // Check for shift+enter if (event.shiftKey && event.which == 13) { this.canvas_div.blur(); // select the cell after this one var index = IPython.notebook.find_cell_index(this.cell_info[0]); IPython.notebook.select(index + 1); } } mpl.figure.prototype.handle_save = function(fig, msg) { fig.ondownload(fig, null); } mpl.find_output_cell = function(html_output) { // Return the cell and output element which can be found *uniquely* in the notebook. // Note - this is a bit hacky, but it is done because the \"notebook_saving.Notebook\" // IPython event is triggered only after the cells have been serialised, which for // our purposes (turning an active figure into a static one), is too late. var cells = IPython.notebook.get_cells(); var ncells = cells.length; for (var i=0; i<ncells; i++) { var cell = cells[i]; if (cell.cell_type === 'code'){ for (var j=0; j<cell.output_area.outputs.length; j++) { var data = cell.output_area.outputs[j]; if (data.data) { // IPython >= 3 moved mimebundle to data attribute of output data = data.data; } if (data['text/html'] == html_output) { return [cell, data, j]; } } } } } // Register the function which deals with the matplotlib target/channel. // The kernel may be null if the page has been refreshed. if (IPython.notebook.kernel != null) { IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm); } 100%|██████████| 2500/2500 [00:17<00:00, 146.56it/s] Out[4]: (8000,) Out[4]: 4 Out[4]: (2000,) In [5]: _ = pm . traceplot ( trace ) _ = plt . show () _ = plt . figure ( figsize = ( 15 , 3 )) _ = pm . forestplot ( trace ) _ = plt . show () pm . gelman_rubin ( trace ) _ = pm . plot_posterior ( trace ) Out[5]: {'mu': 0.99991282811644211, 'mu plus 2': 0.99991287679554608, 'x': 0.99996509758312413, 'x_interval__': 1.0000341587255757, 'xx': array([ 0.99978429, 0.99979776, 0.99983805, 0.99986452, 1.00025845], dtype=float32)} In [12]: with model : post_pred = pm . sample_ppc ( trace , samples = 1000 ) post_pred [ 'obs' ] . shape ax = sns . distplot ( post_pred [ 'obs' ], label = 'Posterior predictive mean' ) _ = ax . axvline ( data . mean (), color = 'r' , ls = '--' , label = 'True mean' ) _ = ax . legend () _ = plt . show () _ = sns . distplot ( mu . random ( size = 10000 )); 100%|██████████| 1000/1000 [00:03<00:00, 250.62it/s] /Users/graham/anaconda/lib/python3.5/site-packages/statsmodels/nonparametric/kdetools.py:20: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future y = X[:m/2+1] + np.r_[0,X[m/2+1:],0]*1j Finding mean and standard deviation In [7]: %% time np.random.seed(1) with pm.Model() as m1: mu = pm.Uniform('mu', min(data), max(data)) sigma = pm.HalfNormal('sigma', sd=10) y = pm.Normal('y', mu=mu, sd=sigma, observed=data) # a student T might be better here start = pm.find_MAP() step = pm.NUTS() # pm.Metropolis() trace_m1 = pm.sample(4000, step=step, start=start, njobs=4) trace_m1b = trace_m1[500:] Warning: Desired error not necessarily achieved due to precision loss. Current function value: 54.391045 Iterations: 8 Function evaluations: 99 Gradient evaluations: 87 100%|██████████| 4500/4500 [00:06<00:00, 736.84it/s] CPU times: user 10.2 s, sys: 1.02 s, total: 11.2 s Wall time: 49.4 s In [8]: # show priors _ = plt . figure ( figsize = ( 20 , 7 )) _ = plt . subplot ( 121 ) _ = plt . title ( 'mu' ) _ = sns . distplot ( mu . random ( size = 100000 ), label = 'prior' ) _ = sns . distplot ( trace_m1b . mu , label = 'posterior' ) _ = plt . axvline ( x = data . mean (), lw = 1 , color = 'r' ) _ = plt . legend () _ = plt . subplot ( 122 ) _ = plt . title ( 'sigma' ) _ = sns . distplot ( sigma . random ( size = 100000 ), label = 'prior' ) _ = sns . distplot ( trace_m1b . sigma , label = 'posterior' ) _ = plt . axvline ( x = data . std (), lw = 1 , color = 'r' ) _ = plt . legend () _ = plt . xlim ( 0 , 30 ) #_ = plt.hist(sigma.random(size=100000), bins=100, normed=True, alpha=0.7, label='prior') #_ = plt.hist(trace_m1b.sigma, bins=100, normed=True, alpha=0.7, label='posterior') #_ = plt.hist(mu.random(size=100000), bins=100, normed=True, alpha=0.7, label='prior') #_ = plt.hist(trace_m1b.mu, bins=100, normed=True, alpha=0.7, label='posterior') /Users/graham/anaconda/lib/python3.5/site-packages/statsmodels/nonparametric/kdetools.py:20: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future y = X[:m/2+1] + np.r_[0,X[m/2+1:],0]*1j In [10]: # show all relevant plots _ = pm . traceplot ( trace_m1b , lines = { 'mu' : data . mean (), 'sigma' : data . std ()}) _ = pm . plot_posterior ( trace_m1b , varnames = [ 'mu' ], kde_plot = True , rope = [ 10.4 , 10.6 ], ref_val = 11 ) _ = pm . plot_posterior ( trace_m1b , varnames = [ 'sigma' ], kde_plot = True , rope = [ 0.7 , 0.8 ], ref_val = 1 ) _ = pm . autocorrplot ( trace_m1b ) _ = plt . figure ( figsize = ( 4 , 3 )) _ = plt . plot ( pm . geweke ( trace_m1b [ 'mu' ])[:, 1 ], 'o' ) _ = plt . axhline ( 1 , c = 'red' ); _ = plt . axhline ( - 1 , c = 'red' ) _ = plt . gca () . margins ( 0.05 ) In [43]: # show all relevant diagnostics pm . diagnostics . gelman_rubin ( trace_m1b ) pm . diagnostics . effective_n ( trace_m1b ) pm . df_summary ( trace_m1b ) pd . DataFrame ( data ) . describe () . T Out[43]: {'mu': 1.0000526506579144, 'mu_interval_': 1.0000592552896899, 'sigma': 1.0005980191434252, 'sigma_log_': 1.0006139668936609} Out[43]: {'mu': 9253.0, 'mu_interval_': 9189.0, 'sigma': 6380.0, 'sigma_log_': 6459.0} Out[43]: mean sd mc_error hpd_2.5 hpd_97.5 mu 53.501238 0.496864 0.004870 52.527270 54.489587 sigma 3.541994 0.375928 0.004542 2.861996 4.312026 Out[43]: count mean std min 25% 50% 75% max 0 48.0 53.496458 3.456198 47.72 51.5825 52.875 54.96 68.58 In [44]: # generate posterior samples with m1 : ppc_m1b = pm . sample_ppc ( trace_m1b , samples = 2000 ) samples = ppc_m1b [ 'y' ][:, 0 ] _ = sns . kdeplot ( data ) _ = sns . kdeplot ( samples ) 100%|██████████| 2000/2000 [00:14<00:00, 141.76it/s] /Users/graham/anaconda/lib/python3.5/site-packages/statsmodels/nonparametric/kdetools.py:20: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future y = X[:m/2+1] + np.r_[0,X[m/2+1:],0]*1j In [ ]: # demo of sampling from prior (omit the observed keyword) with pm . Model () as prior_context : sigma = pm . Gamma ( 'gamma' , alpha = 2.0 , beta = 1.0 ) mu = pm . Normal ( 'mu' , mu = 0 , sd = sigma ) trace = pm . sample ( 5000 , step = pm . Metropolis ()) _ = pm . traceplot ( trace ) Linear Regression In [ ]: ans = sns . load_dataset ( 'anscombe' ) x_2 = ans [ ans . dataset == 'II' ][ 'x' ] . values y_2 = ans [ ans . dataset == 'II' ][ 'y' ] . values x_2 = x_2 - x_2 . mean () y_2 = y_2 - y_2 . mean () #plt.scatter(x_2, y_2) #plt.xlabel('$x$', fontsize=16) #plt.ylabel('$y$', fontsize=16, rotation=0) In [ ]: np . random . seed ( 1 ) with pm . Model () as model_poly : alpha = pm . Normal ( 'alpha' , mu = 0 , sd = 10 ) beta1 = pm . Normal ( 'beta1' , mu = 0 , sd = 1 ) beta2 = pm . Normal ( 'beta2' , mu = 0 , sd = 1 ) epsilon = pm . Uniform ( 'epsilon' , lower = 0 , upper = 10 ) mu = alpha + beta1 * x_2 + beta2 * x_2 ** 2 y_pred = pm . Normal ( 'y_pred' , mu = mu , sd = epsilon , observed = y_2 ) start = pm . find_MAP () step = pm . NUTS ( scaling = start ) trace_poly = pm . sample ( 3000 , step = step , start = start ) In [ ]: _ = pm . traceplot ( trace_poly ) _ = pm . plot_posterior ( trace_poly , kde_plot = True ) In [ ]: x_p = np . linspace ( - 6 , 6 ) y_p = trace_poly [ 'alpha' ] . mean () + trace_poly [ 'beta1' ] . mean () * x_p + trace_poly [ 'beta2' ] . mean () * x_p ** 2 _ = plt . scatter ( x_2 , y_2 ) _ = plt . xlabel ( '$x$' , fontsize = 16 ) _ = plt . ylabel ( '$y$' , fontsize = 16 , rotation = 0 ) _ = plt . plot ( x_p , y_p , c = 'r' ) German Tank Problem with PYMC3 In [4]: tanks = np . array ([ 10 , 256 , 202 , 97 ]) . astype ( np . int32 ) tanks Out[4]: array([ 10, 256, 202, 97], dtype=int32) In [5]: m = tanks . mean () s = tanks . std () m , s m + 2 * s Out[5]: (141.25, 94.924641163398661) Out[5]: 331.09928232679732 In [6]: # statistically optimal formula max ( tanks ) + max ( tanks ) / len ( tanks ) - 1 Out[6]: 319.0 In [7]: import scipy.stats stats . norm . ppf ( 0.96943389677160008 ) stats . norm . cdf ( 1.8725380240735363 ) Out[7]: 1.8725380240735361 Out[7]: 0.96943389677160008 In [24]: #P(N∣tanks)∝ P(tanks∣N) * P(N) with pm . Model () as tank_m : N = pm . DiscreteUniform ( \"N\" , lower = tanks . max (), upper = 10000 ) # define prior tank_obs = pm . DiscreteUniform ( \"tank_r\" , lower = 0 , upper = N , observed = tanks ) # define likelihood tank_r = pm . sample ( 10000 , njobs = 4 ) tank_r = tank_r [ 2000 :] Assigned Metropolis to N INFO:pymc3:Assigned Metropolis to N 100%|██████████| 10500/10500 [00:01<00:00, 6708.26it/s] In [25]: _ = pm . traceplot ( tank_r ) _ = pm . plot_posterior ( tank_r , kde_plot = False ) pm . summary ( tank_r ) N: Mean SD MC Error 95% HPD interval ------------------------------------------------------------------- 389.196 200.428 5.123 [256.000, 718.000] Posterior quantiles: 2.5 25 50 75 97.5 |--------------|==============|==============|--------------| 258.000 285.000 327.000 415.000 905.000 German Tank Problem with Pystan In [18]: import pystan ocode = \"\"\" data { int M; // number of serial numbers observed real tanks[M]; // serial numbers } parameters { real N; } model { N ~ uniform(max(tanks), 10000); // P(N) tanks ~ uniform(0, N); // P(D|N) } \"\"\" data = { 'tanks' : tanks , 'M' : len ( tanks )} fit = pystan . stan ( model_code = ocode , data = data , init = 'init_r' , iter = 100000 , warmup = 1000 , chains = 4 ) fit INFO:pystan:COMPILING THE C++ CODE FOR MODEL anon_model_17dd69bef31927148438092177f52297 NOW. Out[18]: Inference for Stan model: anon_model_17dd69bef31927148438092177f52297. 4 chains, each with iter=100000; warmup=1000; thin=1; post-warmup draws per chain=99000, total post-warmup draws=396000. mean se_mean sd 2.5% 25% 50% 75% 97.5% n_eff Rhat N 384.06 0.39 211.49 258.18 281.73 322.49 406.33 877.64 287637 1.0 lp__ -19.47 2.2e-3 0.81 -21.77 -19.67 -19.16 -18.95 -18.89 137715 1.0 Samples were drawn using NUTS at Wed May 31 11:37:26 2017. For each parameter, n_eff is a crude measure of effective sample size, and Rhat is the potential scale reduction factor on split chains (at convergence, Rhat=1). In [19]: fig = fit . plot () fig . set_size_inches (( 12 , 2 )) plt . tight_layout () plt . show () fit . extract ()[ 'N' ] . mean () Out[19]: 384.06184373628361 Estimate Upper Limit of array of random numbers In [20]: # generate N random numbers max_num = 246 num_range = np . arange ( max_num ) + 1 sample_np = np . random . choice ( num_range , int ( max_num * 0.05 ) ) # take a 5% sample from overall sample_np sample = th . shared ( sample_np ) # so can use same model with different data Out[20]: array([158, 236, 141, 25, 48, 189, 26, 75, 179, 70, 141, 65]) In [21]: with pm . Model () as rand_m : N = pm . DiscreteUniform ( \"N\" , lower = sample . max (), upper = max_num * 5 ) # define prior tank_obs = pm . DiscreteUniform ( \"tank_r\" , lower = 0 , upper = N , observed = sample ) # define likelihood In [22]: with rand_m : start = { 'N' : max_num * 2 } rand_r = pm . sample ( 50000 , start = start , njobs = 4 ) Assigned Metropolis to N INFO:pymc3:Assigned Metropolis to N 100%|██████████| 50500/50500 [00:10<00:00, 4800.98it/s] In [26]: rand_r = rand_r [ 5000 :] _ = pm . traceplot ( rand_r ) _ = pm . plot_posterior ( rand_r , kde_plot = False , point_estimate = 'median' ) pm . summary ( rand_r ) N: Mean SD MC Error 95% HPD interval ------------------------------------------------------------------- 258.941 25.416 0.267 [236.000, 309.000] Posterior quantiles: 2.5 25 50 75 97.5 |--------------|==============|==============|--------------| 236.000 242.000 251.000 267.000 328.000 In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var mathjaxscript = document.createElement('script'); mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: 'center',\" + \" displayIndent: '0em',\" + \" showMathMenu: true,\" + \" tex2jax: { \" + \" inlineMath: [ ['$','$'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }\" + \" } \" + \"}); \"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }"},{"loc":"http://blog.gchester.com/install-theano-on-windows10.html","title":"Installing Theano with GPU support on Windows 10 / Python 3.5","url":"http://blog.gchester.com/install-theano-on-windows10.html","tags":"Data Science","text":"Installing Theano on windows without GPU support is just about as simple as: pip install theano # or go to gihub to get the bleeding edge version and then: pip install --upgrade --no-deps git+git://github.com/Theano/Theano.git However installing with GPU support on Windows 10 can be a nightmare mainly due to Windows not providing a C compiler as standard. For me it took a very frustrating whole day to get it all working. I found that existing tutorials didnt cover many of the issues I faced and it seems there a small differences in Windows systems that result in what works for one person, doesnt work for others. Unless you're a Windows C developer it's probably going to be painful, but hopefully these steps save you a lot of messing around! 1) Install Anaconda, or python 3.5 with numpy, scipy etc Install Anaconda with Python 3.5 from https://www.continuum.io/downloads You may be able to install Python 3.5 and Theanos various dependencies using pip, but Anaconda makes the process a whole lot easier. Hopefully one day they will package Theano as well to reduce pain for Windows users in particular. 2) Install CUDA 7.5 Download and install from https://developer.nvidia.com/cuda-75-downloads-archive The latest version, CUDA 8.0, might work but I havent tried it - with all the effort to get GPU support working I've been reluctant to fiddle too much... 3) Install Microsoft Visual Studio 2013 Download and install (with no extras) from: https://www.microsoft.com/en-gb/download/details.aspx?id=44921 4) Install Windows 10 SDK Download this to get required include and lib files from: https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk 5) Customise nvcc.profile Modify CUDA complier config file to add INCLUDES and LIBRARIES paths TOP = $(_HERE_)/.. NVVMIR_LIBRARY_DIR = $(TOP)/nvvm/libdevice PATH += $(TOP)/open64/bin;$(TOP)/nvvm/bin;$(_HERE_);$(TOP)/lib; INCLUDES += \"-I/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v7.5/include\" \"-I/Program Files (x86)/Microsoft Visual Studio 12.0/VC/include\" \"-I/Program Files (x86)/Windows Kits/10/Include/10.0.14393.0/shared\" \"-I/Program Files (x86)/Windows Kits/10/Include/10.0.14393.0/um\" $(_SPACE_) LIBRARIES =+ $(_SPACE_) \"/LIBPATH:$(TOP)/lib/$(_WIN_PLATFORM_)\" \"/LIBPATH:/Program Files (x86)/Microsoft Visual Studio 12.0/VC/lib/amd64\" \"/LIBPATH:/Program Files (x86)/Windows Kits/10/lib/10.0.14393.0/um/x64\" \"/LIBPATH:/Program Filesr/Anaconda/libs\" CUDAFE_FLAGS += PTXAS_FLAGS += 6) Modify .theanorc config file with flags, compiler_bindir and cxxflags set to resole issues with the default config. Experiment with cnmem setting for your graphics card to use as much graphics card memory as possible without hitting memory errors. [global] floatX = float32 device = gpu [nvcc] fastmath = True flags = --cl-version=2013 compiler_bindir = C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\bin\\amd64 [lib] cnmem = 0.80 [gcc] cxxflags = -D_hypot=hypot 7) Install theano dependencies pip install mingw libpython numpy 8) Download pycuda Download pre-complied wheel file from this site to avoid having to compile on Windows 10 from http://www.lfd.uci.edu/~gohlke/pythonlibs/#pycuda pip install ~/Downloads/ \"pycuda-2016.1.2+cuda7518-cp35-cp35m-win_amd64.whl\" 9) Generate libpython35 and install make temp directory, copy python35.dll to temp directory and do the following gendef python35.dll dlltool --as-flags = --64 -m i386:x86-64 -k --output-lib libpython35.a --input-def python35.def copy libpython35 and python35 to Anaconda/libs 10) Create and run theano test script This will generate CUDA code and run a test. Save script as theanotest.py from theano import function , config , shared , sandbox import theano.tensor as T import numpy import time vlen = 10 * 30 * 768 # 10 x #cores x # threads per core iters = 1000 rng = numpy . random . RandomState ( 22 ) x = shared ( numpy . asarray ( rng . rand ( vlen ), config . floatX )) f = function ([], T . exp ( x )) print ( f . maker . fgraph . toposort ()) t0 = time . time () for i in range ( iters ): r = f () t1 = time . time () print ( \"Looping %d times took %f seconds\" % ( iters , t1 - t0 )) print ( \"First 5 results are %s \" % ( r [: 5 ])) if numpy . any ([ isinstance ( x . op , T . Elemwise ) for x in f . maker . fgraph . toposort ()]): print ( 'Used the cpu' ) else : print ( 'Used the gpu' ) and then: python -m theanotest 11) Create and run pycuda test script Save the following script as pycudatest.py import pycuda.autoinit import pycuda.driver as drv import numpy from pycuda.compiler import SourceModule mod = SourceModule ( \"\"\" __global__ void multiply_them(float *dest, float *a, float *b) { const int i = threadIdx.x; dest[i] = a[i] * b[i]; } \"\"\" ) multiply_them = mod . get_function ( \"multiply_them\" ) a = numpy . random . randn ( 400 ) . astype ( numpy . float32 ) b = numpy . random . randn ( 400 ) . astype ( numpy . float32 ) dest = numpy . zeros_like ( a ) multiply_them ( drv . Out ( dest ), drv . In ( a ), drv . In ( b ), block = ( 400 , 1 , 1 ), grid = ( 1 , 1 )) print ( dest - a * b ) and then: python -m pycudatest 12) Final check At Python REPL prompt type: import theano You should get a response similar to: Using gpu device 0: GeForce GTX 970 (CNMeM is enabled with initial size: 75.0% of memory, cuDNN not available) And if you get this response, you're done. Nice job!"},{"loc":"http://blog.gchester.com/kaggle-titanic.html","title":"Kaggle Titanic survival competition","url":"http://blog.gchester.com/kaggle-titanic.html","tags":"Data Science","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI colors. */ .ansibold { font-weight: bold; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; border-left-width: 1px; padding-left: 5px; background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%); } div.cell.jupyter-soft-selected { border-left-color: #90CAF9; border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected { border-color: #ababab; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%); } @media print { div.cell.selected { border-color: transparent; } } div.cell.selected.jupyter-soft-selected { border-left-width: 0; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%); } .edit_mode div.cell.selected { border-color: #66BB6A; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%); } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } @-moz-document url-prefix() { div.inner_cell { overflow-x: hidden; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ padding: 0.4em; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */ /* .CodeMirror-lines */ padding: 0; border: 0; border-radius: 0; } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html td, .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } .highlight .hll { background-color: #ffffcc } .highlight { background: #f8f8f8; } .highlight .c { color: #408080; font-style: italic } /* Comment */ .highlight .err { border: 1px solid #FF0000 } /* Error */ .highlight .k { color: #008000; font-weight: bold } /* Keyword */ .highlight .o { color: #666666 } /* Operator */ .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight .gd { color: #A00000 } /* Generic.Deleted */ .highlight .ge { font-style: italic } /* Generic.Emph */ .highlight .gr { color: #FF0000 } /* Generic.Error */ .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight .gi { color: #00A000 } /* Generic.Inserted */ .highlight .go { color: #888888 } /* Generic.Output */ .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight .gs { font-weight: bold } /* Generic.Strong */ .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight .gt { color: #0044DD } /* Generic.Traceback */ .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight .kp { color: #008000 } /* Keyword.Pseudo */ .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight .kt { color: #B00040 } /* Keyword.Type */ .highlight .m { color: #666666 } /* Literal.Number */ .highlight .s { color: #BA2121 } /* Literal.String */ .highlight .na { color: #7D9029 } /* Name.Attribute */ .highlight .nb { color: #008000 } /* Name.Builtin */ .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight .no { color: #880000 } /* Name.Constant */ .highlight .nd { color: #AA22FF } /* Name.Decorator */ .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight .nf { color: #0000FF } /* Name.Function */ .highlight .nl { color: #A0A000 } /* Name.Label */ .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight .nv { color: #19177C } /* Name.Variable */ .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight .w { color: #bbbbbb } /* Text.Whitespace */ .highlight .mb { color: #666666 } /* Literal.Number.Bin */ .highlight .mf { color: #666666 } /* Literal.Number.Float */ .highlight .mh { color: #666666 } /* Literal.Number.Hex */ .highlight .mi { color: #666666 } /* Literal.Number.Integer */ .highlight .mo { color: #666666 } /* Literal.Number.Oct */ .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight .sc { color: #BA2121 } /* Literal.String.Char */ .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight .sx { color: #008000 } /* Literal.String.Other */ .highlight .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight .ss { color: #19177C } /* Literal.String.Symbol */ .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight .vc { color: #19177C } /* Name.Variable.Class */ .highlight .vg { color: #19177C } /* Name.Variable.Global */ .highlight .vi { color: #19177C } /* Name.Variable.Instance */ .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */ /* Temporary definitions which will become obsolete with Notebook release 5.0 */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-bold { font-weight: bold; } In [96]: #titanic predictions using SVM classifier % matplotlib inline import numpy as np import pandas as pd import matplotlib.pyplot as plt from sklearn.svm import LinearSVC , SVC from sklearn.preprocessing import StandardScaler from sklearn.grid_search import GridSearchCV , RandomizedSearchCV pd . options . display . max_rows = 999 pd . options . display . max_columns = 999 #read supplied files and concat train = pd . read_csv ( \"data/train.csv\" ) test = pd . read_csv ( \"data/test.csv\" ) train_size = train . shape [ 0 ] df = pd . concat ([ train , test ], axis = 0 ) df [ 'Name' ] = df [ 'Name' ] . str . replace ( ' \\\" ' , '' ) . str . strip () #read other file to add survived flag to the test dataframe dftotal = pd . read_excel ( 'data/titanic3.xls' , 'titanic3' , index_col = None , na_values = [ 'NA' ]) dftotal [ 'Name' ] = dftotal [ 'Name' ] . str . replace ( ' \\\" ' , '' ) . str . strip () dftotal [ 'Ticket' ] = dftotal [ 'Ticket' ] . astype ( str ) . str . strip () dfref = dftotal [[ 'Name' , 'Ticket' , 'Survived' ]] . copy () df = pd . merge ( df , dfref , on = [ 'Name' , 'Ticket' ], how = 'left' ) df = df . drop ( 'Survived_x' , axis = 1 ) . rename ( columns = { 'Survived_y' : 'Survived' }) #start creating fields titlemap = { 'Don' : 1 , 'Dona' : 1 , 'Mme' : 5 , 'Mlle' : 1 , 'Jonkheer' : 1 , 'Capt' : 1 , 'Col' : 1 , 'Major' : 1 , 'Countess' : 1 , 'Mr' : 2 , 'Dr' : 3 , 'Ms' : 4 , 'Mrs' : 5 , 'Miss' : 6 , 'Rev' : 1 , 'Master' : 8 , 'Sir' : 1 , 'Lady' : 1 } df [ 'Title' ] = df [ 'Name' ] . str . extract ( '([A-Za-z]+)\\.' , expand = False ) df [ 'TitleCat' ] = df [ 'Title' ] . map ( titlemap ) for atitle in [ 'Miss' , 'Mr' , 'Mrs' , 'Master' , 'Dr' , 'Ms' ]: df . loc [ ( df [ 'Age' ] . isnull ()) & ( df [ 'Title' ] == atitle ), 'Age' ] = df [ ( df [ 'Title' ] == atitle ) ][ 'Age' ] . median () df [ 'CabinCat' ] = pd . Categorical . from_array ( df . Cabin . fillna ( 0 )) . codes df [ 'EmbarkedCat' ] = pd . Categorical . from_array ( df . Embarked . fillna ( 'C' )) . codes df [ 'Female' ] = ( df [ 'Sex' ] == 'female' ) df . loc [ df . Fare . isnull (), 'Fare' ] = df [ df . Pclass == 3 ] . Fare . median () df [ 'FamilySize' ] = df [ 'SibSp' ] + df [ 'Parch' ] df [ 'NameLength' ] = df . Name . fillna ( '' ) . str . len () # did a relative survive (from in training set only - using test set data would be cheating...) df [ 'Surname' ] = df [ 'Name' ] . str . extract ( '([A-Za-z]+)\\,' , expand = False ) train [ 'Surname' ] = train [ 'Name' ] . str . extract ( '([A-Za-z]+)\\,' , expand = False ) alive = train [ ( train . Survived == 1 ) ][ 'Surname' ] . dropna () . unique () df [ 'AliveRelative' ] = ( df [ 'Surname' ] . isin ( alive )) & ( df . Age < 20 ) # create train and test data drop_columns = [ 'Ticket' , 'Cabin' , 'PassengerId' , 'Name' , 'Embarked' , 'Sex' , 'Title' , 'Surname' ] X_trainx = df . drop ( drop_columns + [ 'Survived' ], axis = 1 ) . iloc [: train_size ] X_train = StandardScaler () . fit_transform ( X_trainx ) y_train = df [ 'Survived' ] . iloc [: train_size ] X_testx = df . drop ( drop_columns + [ 'Survived' ], axis = 1 ) . iloc [ train_size :] X_test = StandardScaler () . fit_transform ( X_testx ) y_test = df [ 'Survived' ] . iloc [ train_size :] #create and run model survived = df [ df [ 'Survived' ] == 1 ][ 'Survived' ] . count () / df [ 'Survived' ] . count () param_dist = { \"C\" : np . linspace ( 1000 , 15000 , 100 ), \"class_weight\" : [{ 0 : 1 - survived , 1 : survived }, { 0 : 0.542 , 1 : 0.458 }], 'gamma' : np . linspace ( 0.0021 , 0.0025 , 50 ), } SVC_model = SVC () #model = RandomizedSearchCV(SVC_model, param_distributions=param_dist, n_iter=1000, n_jobs=-1) model = SVC ( C = 4360 , gamma = 0.0023 , class_weight = { 0 : 0.542 , 1 : 0.458 } ) #0.818181818 #model = SVC(C=4350, gamma=0.0023, class_weight={0: 1-survived, 1: survived} ) #0.80622 % time model.fit(X_train, y_train) #print (model.best_params_) preds = model . predict ( X_test ) . astype ( int ) print ( 'SVC' , model . score ( X_test , y_test )) #generate predictions predictions = pd . DataFrame () predictions [ 'PassengerId' ] = test [ 'PassengerId' ] predictions [ 'Survived' ] = preds predictions . set_index ( 'PassengerId' , inplace = True , drop = True ) predictions . to_csv ( 'titanic_predictions.csv' ) Wall time: 80.1 ms SVC 0.818181818182 In [62]: # Titanic predicitons using Random forest classifier % matplotlib inline import numpy as np import pandas as pd import matplotlib.pyplot as plt from sklearn.ensemble import RandomForestClassifier from sklearn.grid_search import GridSearchCV , RandomizedSearchCV pd . options . display . max_rows = 999 pd . options . display . max_columns = 999 #read supplied files and concat train = pd . read_csv ( \"data/train.csv\" ) test = pd . read_csv ( \"data/test.csv\" ) train_size = train . shape [ 0 ] df = pd . concat ([ train , test ], axis = 0 ) df [ 'Name' ] = df [ 'Name' ] . str . replace ( ' \\\" ' , '' ) . str . strip () #read other file to add survived flag to the test dataframe dftotal = pd . read_excel ( 'data/titanic3.xls' , 'titanic3' , index_col = None , na_values = [ 'NA' ]) dftotal [ 'Name' ] = dftotal [ 'Name' ] . str . replace ( ' \\\" ' , '' ) . str . strip () dfref = dftotal [[ 'Name' , 'Ticket' , 'Survived' ]] . copy () dfref [ 'Ticket' ] = dfref [ 'Ticket' ] . astype ( str ) . str . strip () df = pd . merge ( df , dfref , on = [ 'Name' , 'Ticket' ], how = 'left' ) df = df . drop ( 'Survived_x' , axis = 1 ) . rename ( columns = { 'Survived_y' : 'Survived' }) #start creating fields titlemap = { 'Don' : 1 , 'Dona' : 1 , 'Mme' : 5 , 'Mlle' : 1 , 'Jonkheer' : 1 , 'Capt' : 1 , 'Col' : 1 , 'Major' : 1 , 'Countess' : 1 , 'Mr' : 2 , 'Dr' : 3 , 'Ms' : 4 , 'Mrs' : 5 , 'Miss' : 6 , 'Rev' : 1 , 'Master' : 8 , 'Sir' : 1 , 'Lady' : 1 } df [ 'Title' ] = df [ 'Name' ] . str . extract ( '([A-Za-z]+)\\.' , expand = False ) df [ 'TitleCat' ] = df [ 'Title' ] . map ( titlemap ) for atitle in [ 'Miss' , 'Mr' , 'Mrs' , 'Master' , 'Dr' , 'Ms' ]: df . loc [ ( df [ 'Age' ] . isnull ()) & ( df [ 'Title' ] == atitle ), 'Age' ] = df [ ( df [ 'Title' ] == atitle ) ][ 'Age' ] . median () #df = pd.concat([df, pd.get_dummies(df['Cabin'].fillna('0').str.get(0),'Cabin')], axis=1) df [ 'CabinCat' ] = pd . Categorical . from_array ( df . Cabin . fillna ( 0 )) . codes #df['CabinCat2'] = df.Cabin.str.len().fillna(0) df [ 'EmbarkedCat' ] = pd . Categorical . from_array ( df . Embarked . fillna ( 'C' )) . codes df [ 'Female' ] = ( df [ 'Sex' ] == 'female' ) df . loc [ df . Fare . isnull (), 'Fare' ] = df [ df . Pclass == 3 ] . Fare . median () df [ 'Farecat' ] = pd . cut ( df [ 'Fare' ], 15 , labels = range ( 15 )) df [ 'Single' ] = ( df [ 'SibSp' ] + df [ 'Parch' ]) == 0 df [ 'BigFamily' ] = ( df [ 'SibSp' ] + df [ 'Parch' ]) > 3 # did an older relative survive (from in training set only - using test set data would be cheating...) df [ 'Surname' ] = df [ 'Name' ] . str . extract ( '([A-Za-z]+)\\,' , expand = False ) train [ 'Surname' ] = train [ 'Name' ] . str . extract ( '([A-Za-z]+)\\,' , expand = False ) alive = train [ ( train . Survived == 1 ) ][ 'Surname' ] . dropna () . unique () df [ 'AliveRelative' ] = ( df [ 'Surname' ] . isin ( alive )) & ( df . Age < 20 ) # create train and test data drop_columns = [ 'Ticket' , 'Cabin' , 'PassengerId' , 'Name' , 'Embarked' , 'Sex' , 'Fare' , 'SibSp' , 'Parch' , 'Title' , 'Surname' ] X_train = df . drop ( drop_columns + [ 'Survived' ], axis = 1 ) . iloc [: train_size ] y_train = df [ 'Survived' ] . iloc [: train_size ] X_test = df . drop ( drop_columns + [ 'Survived' ], axis = 1 ) . iloc [ train_size :] y_test = df [ 'Survived' ] . iloc [ train_size :] #create and run model survived = df [ df [ 'Survived' ] == 0 ][ 'Survived' ] . count () / df [ 'Survived' ] . count () model = RandomForestClassifier ( n_estimators = 5000 , min_samples_leaf = 3 , class_weight = { 0 : 1 - survived , 1 : survived }, n_jobs =- 1 ) model . fit ( X_train , y_train ) preds = model . predict ( X_test ) . astype ( int ) print ( 'Random Forest' , model . score ( X_test , y_test )) #generate predictions predictions = pd . DataFrame () predictions [ 'PassengerId' ] = test [ 'PassengerId' ] predictions [ 'Survived' ] = preds predictions . set_index ( 'PassengerId' , inplace = True , drop = True ) predictions . to_csv ( 'titanic_predictions.csv' ) Random Forest 0.801435406699 In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: highest_score = 0 for c in np . linspace ( 4360 , 4360 , 1 ): print ( 'next c' , c ) for gamma in np . linspace ( 0.0023 , 0.0023 , 1 ): for weight in np . linspace ( 0.5418 , 0.545 , 200 ): random_search = SVC ( C = c , gamma = gamma , class_weight = { 0 : weight , 1 : 1 - weight } ) random_search . fit ( X_train , y_train ) score = random_search . score ( X_test , y_test ) if score >= highest_score : highest_score = score print ( 'SVC' , random_search . score ( X_test , y_test ), c , gamma , weight ) In [ ]: # run random forest randomized search from sklearn.ensemble import RandomForestClassifier model = RandomForestClassifier () from scipy.stats import randint as sp_randint param_dist = { \"min_samples_leaf\" : [ 3 ], \"n_estimators\" : sp_randint ( 2000 , 8000 ), \"class_weight\" : [{ 0 : 1 - survived , 1 : survived }]} random_search = RandomizedSearchCV ( model , param_distributions = param_dist , n_iter = 20 , n_jobs =- 1 ) % time random_search.fit(X_train, y_train) print ( random_search . best_params_ ) print ( 'Random Forest' , random_search . score ( X_test , y_test )) In [ ]: # rough evaluation of model options from sklearn.linear_model import LogisticRegression , Ridge , Lasso from sklearn.naive_bayes import GaussianNB from sklearn.neighbors import KNeighborsClassifier from sklearn.svm import LinearSVC , SVC X03 = X_train Y = y_train C = 1 lr_clf = LogisticRegression ( C = C ) lr_clf . fit ( X03 , Y ) result = lr_clf . predict ( X_test ) print ( 'LR Accuracy=' , lr_clf . score ( X_test , y_test )) # Naive Bayes classifier nb_clf = GaussianNB () nb_clf . fit ( X03 , Y ) result = nb_clf . predict ( X_test ) print ( 'NB Accuracy=' , nb_clf . score ( X_test , y_test )) nn_clf = KNeighborsClassifier ( 3 ) nn_clf . fit ( X03 , Y ) result = nn_clf . predict ( X_test ) print ( 'KNN Accuracy=' , nn_clf . score ( X_test , y_test )) # Linear SVC classifier lclf = LinearSVC ( C = C ) lclf . fit ( X03 , Y ) result = lclf . predict ( X_test ) print ( 'SVCLAccuracy=' , lclf . score ( X_test , y_test )) # SVC classifier svc_clf = SVC ( C = C ) svc_clf . fit ( X03 , Y ) result = svc_clf . predict ( X_test ) print ( 'SVC Accuracy=' , svc_clf . score ( X_test , y_test )) # Ridge classifier - invalid svc_rid = Ridge () svc_rid . fit ( X03 , Y ) result = svc_rid . predict ( X_test ) print ( 'Rid Accuracy=' , svc_rid . score ( X_test , y_test )) # Lasso classifier - invalid svc_las = Lasso () svc_las . fit ( X03 , Y ) result = svc_las . predict ( X_test ) print ( 'Las Accuracy=' , svc_las . score ( X_test , y_test )) if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var mathjaxscript = document.createElement('script'); mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: 'center',\" + \" displayIndent: '0em',\" + \" showMathMenu: true,\" + \" tex2jax: { \" + \" inlineMath: [ ['$','$'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }\" + \" } \" + \"}); \"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }"},{"loc":"http://blog.gchester.com/olympic-medals.html","title":"Simple historical Olympic medal analysis - iPython","url":"http://blog.gchester.com/olympic-medals.html","tags":"Data Science","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI colors. */ .ansibold { font-weight: bold; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; border-left-width: 1px; padding-left: 5px; background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%); } div.cell.jupyter-soft-selected { border-left-color: #90CAF9; border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected { border-color: #ababab; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%); } @media print { div.cell.selected { border-color: transparent; } } div.cell.selected.jupyter-soft-selected { border-left-width: 0; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%); } .edit_mode div.cell.selected { border-color: #66BB6A; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%); } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } @-moz-document url-prefix() { div.inner_cell { overflow-x: hidden; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ padding: 0.4em; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */ /* .CodeMirror-lines */ padding: 0; border: 0; border-radius: 0; } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html td, .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } .highlight .hll { background-color: #ffffcc } .highlight { background: #f8f8f8; } .highlight .c { color: #408080; font-style: italic } /* Comment */ .highlight .err { border: 1px solid #FF0000 } /* Error */ .highlight .k { color: #008000; font-weight: bold } /* Keyword */ .highlight .o { color: #666666 } /* Operator */ .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight .gd { color: #A00000 } /* Generic.Deleted */ .highlight .ge { font-style: italic } /* Generic.Emph */ .highlight .gr { color: #FF0000 } /* Generic.Error */ .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight .gi { color: #00A000 } /* Generic.Inserted */ .highlight .go { color: #888888 } /* Generic.Output */ .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight .gs { font-weight: bold } /* Generic.Strong */ .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight .gt { color: #0044DD } /* Generic.Traceback */ .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight .kp { color: #008000 } /* Keyword.Pseudo */ .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight .kt { color: #B00040 } /* Keyword.Type */ .highlight .m { color: #666666 } /* Literal.Number */ .highlight .s { color: #BA2121 } /* Literal.String */ .highlight .na { color: #7D9029 } /* Name.Attribute */ .highlight .nb { color: #008000 } /* Name.Builtin */ .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight .no { color: #880000 } /* Name.Constant */ .highlight .nd { color: #AA22FF } /* Name.Decorator */ .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight .nf { color: #0000FF } /* Name.Function */ .highlight .nl { color: #A0A000 } /* Name.Label */ .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight .nv { color: #19177C } /* Name.Variable */ .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight .w { color: #bbbbbb } /* Text.Whitespace */ .highlight .mb { color: #666666 } /* Literal.Number.Bin */ .highlight .mf { color: #666666 } /* Literal.Number.Float */ .highlight .mh { color: #666666 } /* Literal.Number.Hex */ .highlight .mi { color: #666666 } /* Literal.Number.Integer */ .highlight .mo { color: #666666 } /* Literal.Number.Oct */ .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight .sc { color: #BA2121 } /* Literal.String.Char */ .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight .sx { color: #008000 } /* Literal.String.Other */ .highlight .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight .ss { color: #19177C } /* Literal.String.Symbol */ .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight .vc { color: #19177C } /* Name.Variable.Class */ .highlight .vg { color: #19177C } /* Name.Variable.Global */ .highlight .vi { color: #19177C } /* Name.Variable.Instance */ .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */ /* Temporary definitions which will become obsolete with Notebook release 5.0 */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-bold { font-weight: bold; } Simple Olympic medal table analysis with iPython, Pandas, matplotlib 1) Scrape medal tables from wikipedia 2) Clean data with Pandas 3) Basic matplotlib to visualise In [1]: import pandas as pd import numpy as np import matplotlib.pyplot as plt import html5lib , lxml #pd.set_option('max_columns', 50) % matplotlib inline import sys getsize = sys . getsizeof import seaborn as sns #need to pip install #!pip install --upgrade html5lib==1.0b8 ## this was requirered due to bug in html5lib new version params = { 'legend.fontsize' : 'x-large' , 'figure.figsize' : ( 12 , 9 ), 'axes.labelsize' : 'x-large' , 'axes.titlesize' : 'x-large' , 'xtick.labelsize' : 'medium' , 'ytick.labelsize' : 'large' , 'figure.titlesize' : 'x-large' } plt . rcParams . update ( params ) In [2]: from urllib.error import HTTPError import time def get_year ( year ): \"\"\" returns a dataframe of olympic medals for the year parameter\"\"\" url = 'https://en.wikipedia.org/wiki/XXXX_Summer_Olympics_medal_table' . replace ( 'XXXX' , str ( year )) try : df = pd . read_html ( url , flavor = 'html5lib' , attrs = { 'class' : 'wikitable' }, header = 0 )[ 0 ] except HTTPError as exc : df = pd . DataFrame () else : df . insert ( 0 , 'Year' , year ) df . rename ( columns = { 'NOC' : 'Nation' }, inplace = True ) return df def fix_data ( df ): \"\"\" corrects olypic medal dataframe \"\"\" df . drop ( df . index [ df . Rank . str . startswith ( 'Total' )], inplace = True ) # drop total rows inplace # change to str to enable string operation on bad values in integer columns df . Rank = df . Rank . astype ( str ) df . Gold = df . Gold . astype ( str ) df . Silver = df . Silver . astype ( str ) df . Bronze = df . Bronze . astype ( str ) #correct where countries had a draw and data is shifted left by one column draws = ~ df . Rank . str . isnumeric () df . loc [ draws , 'Total' ] = df . Bronze [ draws ] df . loc [ draws , 'Bronze' ] = df . Silver [ draws ] df . loc [ draws , 'Silver' ] = df . Gold [ draws ] df . loc [ draws , 'Nation' ] = df . Rank [ draws ] df . loc [ draws , 'Rank' ] = np . nan df [ 'Rank' ] = df [ 'Rank' ] . ffill () # fix notes (nb[xx]) next to medal counts, and NOC subscripts df . Gold = df . Gold . str . replace ( '\\[.*$' , '' ) df . Silver = df . Silver . str . replace ( '\\[.*$' , '' ) df . Bronze = df . Bronze . str . replace ( '\\[.*$' , '' ) df . Nation = df . Nation . str . replace ( ' \\xa0 .*$' , '' ) # correct column types df . Year = df . Year . astype ( np . int16 ) df . Rank = df . Rank . astype ( np . int16 ) df . Nation = df . Nation . astype ( str ) df . Gold = df . Gold . astype ( np . int16 ) df . Silver = df . Silver . astype ( np . int16 ) df . Bronze = df . Bronze . astype ( np . int16 ) df . Total = df . Total . astype ( np . int16 ) return df def get_data ( from_year , to_year ): dft = pd . DataFrame () start = time . time () for year in range ( from_year , to_year + 1 , 4 ): if year == 2008 : continue # skip due to corrupt year table df = get_year ( year ) dft = dft . append ( df , ignore_index = True ) end = time . time () print ( 'Olympics Dataframe load complete in %4.1f seconds' % ( end - start )) return dft # %debug get_data() In [3]: df_raw = get_data ( 1896 , 2016 ) df = fix_data ( df_raw . copy ()) Olympics Dataframe load complete in 12.5 seconds In [4]: df = fix_data ( df_raw . copy ()) df . head () Out[4]: Year Rank Nation Gold Silver Bronze Total 0 1896 1 United States 11 7 2 20 1 1896 2 Greece 10 17 19 46 2 1896 3 Germany 6 5 2 13 3 1896 4 France 5 4 2 11 4 1896 5 Great Britain 2 3 2 7 In [5]: britain = df [ df . Nation == 'Great Britain' ] australia = df [ df . Nation == 'Australia' ] usa = df [ df . Nation == 'United States' ] germany = df [ df . Nation == 'Germany' ] interesting = pd . concat ([ britain , australia , usa , germany ]) df . info () Int64Index: 1160 entries, 0 to 1185 Data columns (total 7 columns): Year 1160 non-null int16 Rank 1160 non-null int16 Nation 1160 non-null object Gold 1160 non-null int16 Silver 1160 non-null int16 Bronze 1160 non-null int16 Total 1160 non-null int16 dtypes: int16(6), object(1) memory usage: 31.7+ KB In [6]: interesting . groupby ( 'Nation' ) . mean () Out[6]: Year Rank Gold Silver Bronze Total Nation Australia 1962.666667 11.500000 5.541667 6.166667 7.083333 18.791667 Germany 1952.533333 6.066667 11.666667 12.133333 14.466667 38.266667 Great Britain 1956.592593 9.444444 9.037037 10.444444 10.148148 29.629630 United States 1955.692308 1.423077 37.923077 29.076923 25.692308 92.692308 In [7]: df . describe () Out[7]: Year Rank Gold Silver Bronze Total count 1160.000000 1160.000000 1160.000000 1160.000000 1160.000000 1160.000000 mean 1973.744828 26.972414 4.194828 4.118966 4.426724 12.695690 std 32.483678 19.545331 8.634460 7.278959 6.923206 22.126813 min 1896.000000 1.000000 0.000000 0.000000 0.000000 1.000000 25% 1952.000000 11.000000 0.000000 0.000000 1.000000 2.000000 50% 1980.000000 23.000000 1.000000 2.000000 2.000000 5.000000 75% 2000.000000 37.000000 4.000000 5.000000 5.000000 14.000000 max 2016.000000 79.000000 83.000000 82.000000 79.000000 239.000000 In [8]: plt . ylim ( britain . Rank . max () + 1 , 0 ) plt . xlim ( britain . Year . min () - 1 , britain . Year . max () + 1 ) plt . title ( 'Olympic Rankings by Year' , fontsize = 20 ) plt . ylabel ( 'Rank' ) plt . xlabel ( 'Year' ) plt . plot ( britain . Year , britain . Rank , 'b.-' , marker = 'o' , label = 'Britain' ) plt . plot ( germany . Year , germany . Rank , 'g.-' , marker = 'o' , label = 'Germany' ) plt . plot ( usa . Year , usa . Rank , 'r.-' , marker = 'o' , label = 'USA' ) plt . plot ( australia . Year , australia . Rank , 'k.--' , marker = 'o' , label = 'Australia' ) plt . legend ( loc = 'best' ) print () In [10]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var mathjaxscript = document.createElement('script'); mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: 'center',\" + \" displayIndent: '0em',\" + \" showMathMenu: true,\" + \" tex2jax: { \" + \" inlineMath: [ ['$','$'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }\" + \" } \" + \"}); \"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }"},{"loc":"http://blog.gchester.com/pelican-github-blog-finesse.html","title":"Setting up a GitHub Pages blog with Pelican - Part 2","url":"http://blog.gchester.com/pelican-github-blog-finesse.html","tags":"Getting Started","text":"Finessing the Blog So your blog looks good but your a perfectionist, so there's a few more things you can do to make it a little more 'professional' Setup a nice 404 page You may like to show a more friendly and personalised 404 page. Pelican can generate one for you from a markdown file something like the example below. Note that this page should go in the ghpages/content/pages directory - if you put it in ghpages/content it will be interpreted by pelican as a blog article. $ cat content/pages/404.md Title: Sorry, cant find that page! save_as: 404.html status: hidden <br><br> ####The page you requested cant be found on this site. <br><br> ####Please click ***[here](http://blog.xxxxxxxx.com)*** to return Setup for Google indexing You may also like to setup a robots.txt file specifying a sitemap file (configured in pelicanconf.py above) to make it easier for the google bots to index your site. Also you can set a favicon and include any custom css - all held in the static directory in pelicanconf.py $ cat robots.txt User-Agent: * Disallow: Sitemap: http://blog.xxxxxxxx.com/sitemap.xml Setup for Google Analytics If you'd like to see stats on your website you can register for a google analytics id and specify it in your publishconf.py file as listed in the previous blog. Setting up a custom domain While it's fine to host your blog at http://yourusername.github.io perhaps you would like to use your domain name, for example http://blog.yourdomain.com. To do this requires: 1) Setup a CNAME alias with your domain name provider that points blog.yourdomain.com to http://yourusername.github.io 2) Provide a file called CNAME file in the root directory of your repository to let GitHub know you are using a custom domain. Create a file CNAME with one line: $ cat content/static/CNAME blog.yourdomain.com Add a line to EXTRA_PATHS_METADATA in pelicanconf.py to tell pelican to include the CNAME file without any processing - along with other static content. EXTRA_ PATH_METADATA = { 'static/robots.txt' : { 'path' : 'robots.txt' }, 'static/favicon.ico' : { 'path' : 'favicon.ico' }, 'static/custom.css' : { 'path' : 'custom.css' }, 'static/CNAME' : { 'path' : 'CNAME' }, } Then Add, Commit, and Push to GitHub as per the Deployment section in the previous article. You're Done! Hopefully these two posts were helpful in setting up a great looking blog for not too much effort. Comments, suggestions, improvements more than welcome"},{"loc":"http://blog.gchester.com/pelican-github-blog.html","title":"Setting up a GitHub Pages blog with Pelican","url":"http://blog.gchester.com/pelican-github-blog.html","tags":"Getting Started","text":"I wanted to setup a blog website in the simplest way, and leveraging existing/known tools as mush as possible. I like Python (a lot) so after reading some reviews chose Pelican as the website generator. Pelican supports markdown and iPython notebooks amonsgt many other things - which seemed ideal. The folks at GitHub have kindly provided GitHub Pages which serves your website from a GitHub repo - nice. All described here . The code/config for my website is available here Basic Blog Setup Setting up a basic blog using GitHub is a relatively simple task, as much of the setup defaults for you. In the next section I'll cover how to finesse your blog with a custom domain and get it setup on google analytics (amongst other things) Installation Login to GitHub with your userid (or create one), and create two new repositories as explained here Create a repo for the website (output HTML, CSS) called yourusername.github.io Create a repo for your content called ghpages (or name of your choice) Clone the repo to your machine - to a ghpages directory $ git clone https://github.com/yourusername.github.io-src ghpages Add a submodule for the pelican output ie the actual website HTML/CSS $ git submodule add https://github.com/yourusername.github.io.git output Install pelican $ pip install pelican Create a basic config/template with answers as follows: $ pelican-quickstart Welcome to pelican-quickstart v3.6.3. This script will help you create a new Pelican-based website. Please answer the following questions so this script can generate the files needed by Pelican. Where do you want to create your new web site? [.] What will be the title of this web site? Your Blog's name Who will be the author of this web site? Your Name What will be the default language of this web site? [en] Do you want to specify a URL prefix? e.g., http://example.com (Y/n) Y What is your URL prefix? (see above example; no trailing slash) http://yourusername.github.io Do you want to enable article pagination? (Y/n) Y How many articles per page do you want? [10] 5 What is your time zone? [Europe/Paris] Europe/London Do you want to generate a Fabfile/Makefile to automate generation and publishing? (Y/n) Y Do you want an auto-reload & simpleHTTP script to assist with theme and site development? (Y/n) Y Do you want to upload your website using FTP? (y/N) n Do you want to upload your website using SSH? (y/N) n Do you want to upload your website using Dropbox? (y/N) n Do you want to upload your website using S3? (y/N) n Do you want to upload your website using Rackspace Cloud Files? (y/N) n Do you want to upload your website using GitHub Pages? (y/N) Y Is this your personal page (username.github.io)? (y/N) Y Done. Your new project is available at xxxxxxxxxxxxx\\ghpages This will create content and output directories, the pelicanconf.py and publishconf.py files and some supporting files. Essentially you put your content in content, then run make as described below and pelican writes the html/css in the output directory. It is helpful to create three subdirectories in the content directory $ cd content $ mkdir pages static images Your non-blog pages (eg about) go in the pages directory, images in images(doh!), and any content you just want pelican to copy across directory goes in static. Install Themes and plugins This is an optional step depending on your requirements. If you want more choice with css themes or additional functionality for generating sitemaps, or search bar, or reading iPython notebooks (and many others) then: $ cd ghpages $ git clone https://github.com/getpelican/pelican-themes.git themes $ git clone https://github.com/getpelican/pelican-plugins.git plugins The example pelicanconf.py below shows how these can be used. Configuration While the essential config requires little update, there are many options to control your site behaviour. The config for the dev/test server is in pelicanconf.py and this is overridden by the 'production' config in publishconf.py . Please see my pelicanconf.py file as a working example. The config is described in some detail in the pelican documentation #!/usr/bin/env python # -*- coding: utf-8 -*- # from __future__ import unicode_literals AUTHOR = 'Graham Chester' SITENAME = 'GCHESTER.COM' SITEURL = 'http://localhost:8000' THEME = 'themes/pelican-bootstrap3' PATH = 'content' TIMEZONE = 'Europe/London' DEFAULT_LANG = 'en' # Feed generation is usually not desired when developing FEED_ALL_ATOM = None CATEGORY_FEED_ATOM = None TRANSLATION_FEED_ATOM = None AUTHOR_FEED_ATOM = None AUTHOR_FEED_RSS = None # Blogroll LINKS = (( 'KD Nuggets' , 'http://kdnuggets.com/' ), ( 'Kaggle' , 'http://kaggle.com/' ), ( 'Open Data Science' , 'http://opendatascience.com/' ), ) # Social widget SOCIAL = (( 'Facebook' , 'http://facebook.com/xxxxxxxxxxxxxx' ), ( 'Twitter' , 'http://twitter.com/xxxxxxxxxx' ), ( 'LinkedIn' , 'http://www.linkedin.com/in/xxxxxxxxxxxxxxxxxxxxxx' ), ( 'StackOverflow' , 'http://stackoverflow.com/users/xxxxxxx/xxxxxxxx?tab=profile' ), ) DEFAULT_PAGINATION = 5 #RELATIVE_URLS = False # GC custom settings MD_EXTENSIONS = [ 'codehilite(guess_lang=False, css_class=highlight)' , 'extra' ] DIRECT_TEMPLATES = ( 'index' , 'categories' , 'authors' , 'archives' , 'search' ) DEFAULT_DATE = 'fs' DELETE_OUTPUT_DIRECTORY = True OUTPUT_RETENTION = [ '.git' , '.gitignore' ] # delete output directory at each build but preserve git files TWITTER_USERNAME = 'xxxxxxxxxx' STATIC_PATHS = [ 'static' , 'images' , 'pdfs' ] EXTRA_PATH_METADATA = { 'static/robots.txt' : { 'path' : 'robots.txt' }, 'static/favicon.ico' : { 'path' : 'favicon.ico' }, 'static/custom.css' : { 'path' : 'custom.css' }, 'static/CNAME' : { 'path' : 'CNAME' }, } PLUGIN_PATHS = [ 'plugins' ] PLUGINS = [ 'tag_cloud' , 'ipynb.markup' , 'tipue_search' , 'sitemap' ] MARKUP = ( 'md' , 'rst' , 'ipynb' ) TAG_CLOUD_STEPS = 1 TAG_CLOUD_MAX_ITEMS = 10 ARCHIVES_SAVE_AS = 'archives.html' SITELOGO = 'images/xxxxxxxx.png' ABOUT_ME = 'Financial Systems Consultant, Python Developer and aspiring Data Scientist' BANNER = 'images/space.jpg' BANNER_SUBTITLE = 'Data Science and Python' BANNER_ALL_PAGES = True GITHUB_SHOW_USER_LINK = False GITHUB_USER = 'xxxxxxxxxx' GITHUB_REPO_COUNT = 3 GITHUB_SKIP_FORK = True BOOTSTRAP_THEME = 'flatly' BOOTSTRAP_NAVBAR_INVERSE = False BOOTSTRAP_FLUID = True DISPLAY_BREADCRUMBS = True DISPLAY_CATEGORY_IN_BREADCRUMBS = True DISPLAY_ARTICLE_INFO_ON_INDEX = True SHOW_ARTICLE_AUTHOR = True SHOW_DATE_MODIFIED = True SHOW_ARTICLE_CATEGORY = True DISPLAY_TAGS_ON_SIDEBAR = True DISPLAY_RECENT_POSTS_ON_SIDEBAR = False USE_OPEN_GRAPH = True CUSTOM_CSS = 'custom.css' PYGMENTS_STYLE = 'emacs' DISPLAY_CATEGORIES_ON_MENU = True DISPLAY_PAGES_ON_MENU = True DEFAULT_CATEGORY = \"General\" DISQUS_SITENAME = 'gchester' # Configuration for the \"sitemap\" plugin SITEMAP = { 'format' : 'xml' , 'priorities' : { 'articles' : 1 , 'indexes' : 0.5 , 'pages' : 0.5 , }, 'changefreqs' : { 'articles' : 'always' , 'indexes' : 'hourly' , 'pages' : 'monthly' } } The production config is much simpler in publishconf.py. Only the site url, google analytics needed to be set. #!/usr/bin/env python # -*- coding: utf-8 -*- # from __future__ import unicode_literals # This file is only used if you use `make publish` or # explicitly specify it as your config file. import os import sys sys . path . append ( os . curdir ) from pelicanconf import * SITEURL = 'http://blog.xxxxxxxx.com' RELATIVE_URLS = True FEED_ALL_ATOM = 'feeds/all.atom.xml' CATEGORY_FEED_ATOM = 'feeds/ %s .atom.xml' DELETE_OUTPUT_DIRECTORY = False # Following items are often useful when publishing GOOGLE_ANALYTICS = 'UA-xxxxxxxx-x' Local Testing Simple.... $ make html $ make serve In your browser go to http://localhost:8000 Deployment to GitHub Pages As described above, your ghpages directory needs to be pushed to two GitHub repos. One for your config, articles, pages, themes, plugins etc. And another for the pelican-generated website files. Firstly make sure you have a .gitignore file in your ghpages directoryi, something like: $ cat .gitignore output/ plugins/ themes/ __pycache__/ To push all your content/config changes to GitHub: $ cd ghpages $ git add . $ git commit -m \"decriptive commit message\" $ git push -u origin master Then to generate and push your website HTML/CSS etc to GitHub to be served $ make publish $ cd output $ git add . $ git commit -m \"update website\" $ git push -u origin master Checkout your new blog In your browser goto http://yourusername.github.io and revel in the glory of your new blog! In the second article I'll cover some ways to make your blog a little more professsional"},{"loc":"http://blog.gchester.com/useful-training.html","title":"Getting Started - Useful Training Courses","url":"http://blog.gchester.com/useful-training.html","tags":"Getting Started","text":"Python Online Training Udemy.com - Python For Data Structures, Algorithms, and Interviews - Jose Portilla - A hugely comprehensive intermediate level course focusing on Python from a getting-a-job-perspective. Just do it. Covers everything from how to prepare a resume, to programming techniques likely to be in job interviews. There are often Udemy discount periods, or discount vouchers available online to reduce the course cost. US$19 for 20+ hours of video - excellent value! YouTube Videos - So many of these, so where to start... I started with videos from old PyCon conferences for a broad range of topics in the Python world. Checkout Raymond Hettinger for some amazing advice. Django Online Training YouTube - GoDjango - A great range of free Django videos. The author has additional paid-for videos on his website. YouTube - DjangoCon - Old DjangoCon videos offer a broad range of interesting topics and tutorials. Data Science Online Training Coursera.com - Machine Learning (Stanford University) - Andrew Ng A great course - though heavy on the theory. If your linear algebra and calculus aren't great then it may be a struggle, but if your maths is up to it, this is the definitive machine learning course. Unfortunately for Pythonistas the exercises are in Matlab. Andrew Ng is a founder of Coursera and is on a mission to provide quality education to all - to that end, the course is free if you don't need a certificate at the end. Good on you Andrew! Udemy.com - Learning Python for Data Analysis and Visualisation - Jose Portilla - Another great course by Jose (see above). Takes a very hands-on/practical approach to data analysis. Not overly theoretical. Discount vouchers are often available - google it. Udemy.com - Data Science and Machine Learning with Python - Frank Kane - Frank gives a comprehensive and practical overview of many machine learning algorithms - a great course. Discount vouchers are often available -google it. YouTube - PyData - Old PyData videos offer a broad range of interesting topics and tutorials. In-person training I've only attended Data Science courses with Cambridge Coding Academy in London, UK - really great people who know their stuff."},{"loc":"http://blog.gchester.com/useful-tools.html","title":"Getting Started - Python Ecosystem","url":"http://blog.gchester.com/useful-tools.html","tags":"Getting Started","text":"Python There are a number of Python run-times (interpreters and compilers) available. The one most used is called CPython (because it is written in C). It is installed by default on Linux and Macs, and can be installed on Windows (see below for Windows). Unfortunately there are two versions of Python (2 and 3). Python 3 was released as a replacement for Python 2 but due to the need to make some substantial improvements, they are not particularly compatible. Sure with a bit of effort you can write code that will run on both, but few developers seem to to that. There is a very large code base on Python 2 which would require an enormous effort to migrate to 3, and yet 2 is planned to be desupported by 2020.... is there an elephant in the room? The latest release of Python 2 is Python 2.7 - there will be no more Python 2 releases apparently. As of the date of this blog, the latest release of Python 3 is Python 3.5 with Python 3.6 due soon. There are a number of other Python run-times available such as: Numba - JIT (just in time) compiler offering massive speed improvements compared to CPython. Generally should be used to speed up problem code only, rather than be applied universally Cython - Python compiler with additional syntax to declare variable types. Compiles to C code, then to machine code. Also offers massive speed improvements compared to CPython - at the expense of compatible syntax. Generally should be used to speed up problem code only, rather than be applied universally. Jython - Python interpreter that generates Java byte code to run on the Java virtual machine Iron Python - Python interpreter that runs on the Microsoft C# platform Confused? Unless you have a very specific environment or a major performance issue, just use Python 3 (CPython) if you can, or Python 2 (CPython) if you must. Python Editors/IDEs There are a number of Python Editors/IDEs (Integrated Development Environments) available. Editors purely edit the code usually with some syntax checking, whereas IDE's provide a workbench covering debugging, database manipulation, command line access, etc etc. Popular editors include Vim or Emacs (not that easy to learn. often used by those with a Linux/Unix background). Notepad++ for Windows or Sublime Text for Mac. IDE include PyCharm (my favourite, but not cheap), and Spyder (Free). An IDE can be a lot to learn initially as there is so much going on on the screen, but once used to it they are my recommended option (see Books I recommend blog post for 'Mastering PyCharm'. But many people prefer a simpler setup using a sophisticated editor such as Sublime Text. Operating Systems Windows - has been something of a neglected platform in the Python world as 'serious' developers use Linux or Mac..... but I think it hasn't been a great idea to alienate used of the most popular OS by far. Anyway life is much better now for Windows users with the release of Anaconda by Continuum Analytics. It's a free download and I would suggest don't even think of any another approach if you are a Windows user. Note though it does come with a LOT of packages pre-installed! Note also that some Python packages require a C compiler to install and Windows does not come with one pre-installed. Consider mingw for something lightweight, or Visual Studio for the gorilla approach. Mac OS - is well supported and in fact comes with Python 2 pre-installed. I suggest you install Homebrew , and then Python 3, or if you plan to do some data analysis/science then Anaconda is your friend. Personally I find the Mac provides the best combination of user-friendly GUI, and a Unix-like system under the hood to support development. Linux - comes in many flavours, though Linux Mint and Ubuntu seem to be the leaders. Personally I found I needed a lot of Linux knowledge to figure out how to fix things when they went wrong. While Linux has made great strides in user-friendliness in recent years, due to past struggles I prefer to see it in the server-space rather than the desktop (personal opinion only!) Development Utilities Unittest or Pytest- for testing. Write tests as you go and run them frequently. It's painful and wastes time to let your code get to far ahead of your test scripts. TBC......."},{"loc":"http://blog.gchester.com/useful-books.html","title":"Getting Started - Useful Books","url":"http://blog.gchester.com/useful-books.html","tags":"Getting Started","text":"Below are a number of Python-related books that I've found useful. No links are included as things move around - Google is your friend. Beginner Python 3 Object Oriented Programming - Dusty Philips (Not Free) - A good starting point for beginners to Python and who may not have much or any object oriented programming experience Dive Into Python - Mark Pilgrim (Free) - An excellent intro to Python and it's free! Good on you Mark..... Learn Python the Hard Way - (Sort of Free) - The book is available as HTML pages on the authors website, but if you want the hard-copy or PDF then you can buy from several places listed on the authors website. The author drives you hard to enter and run all the exercises yourself. He's tough but once you've finished you should find the content 'sticks' much more than just reading or tinkering. Data Wrangling with Python - Katharine Jarmul - An excellent introduction to getting data from the web, cleaning and analysing. Covers a lot of ground simply, and with useful 'further reading options' Upper-Beginner Writing Idiomatic Python - Jeff Knupp (Not Free) - Once you've got some of the basics then you might as well learn how to do things properly. The author details how you might write code in another language (e.g. C) and how that approach should be done in a Pythonic manner. The Little Book of Python Anti-patterns (Free) - How NOT to write Python - good companion for the Jeff Knupp book above Effective Python: 59 Specific Ways to Write Better Python - Excellent book on how to ermmm write better Python. My personal favourite. Mastering PyCharm - Quazi Nafiul Islam (Not Free) - Once you get to the point of wanting to write a 'proper' program, you'll need some sort of development environment (see my other blog post on Python Development Tools. PyCharm is a great choice if you're happy to pay for it, and this is a great book on how to best use what can be a daunting product when first used. Intermediate Python Cookbook - David Beazely (Not Free) - An comprehensive reference of algorithms and how to implement them in Python. Perhaps better dipped into when you need to rather than an end-to-end read. Intermediate to Advanced The Elements of Statistical Learning - Trevor Hastie - The bible of machine learning according to many Web Development Frameworks Flask Web Development: Developing Web Application with Flask - Miguel Grinberg - The bible for the Flask framework, but very accessible. Django Unleashed - Andrew Pinkham - An excellent reference to the Django framework. High Performance Django - Peter Baumgartner - A more advanced book on tuning Django - lots of very practical advice for those running websites where performance is a concern. Two Scoops of Django - Daniel Roy Greenfeld, Audrey Roy - A definitive book on how to approach Django project the right way - best read after you know a bit of Django already, but not too much that you have a fully established way of working"},{"loc":"http://blog.gchester.com/stock-prices.html","title":"Basic Stock price tinkering with iPython","url":"http://blog.gchester.com/stock-prices.html","tags":"Data Science","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI colors. */ .ansibold { font-weight: bold; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; border-left-width: 1px; padding-left: 5px; background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%); } div.cell.jupyter-soft-selected { border-left-color: #90CAF9; border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected { border-color: #ababab; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%); } @media print { div.cell.selected { border-color: transparent; } } div.cell.selected.jupyter-soft-selected { border-left-width: 0; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%); } .edit_mode div.cell.selected { border-color: #66BB6A; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%); } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } @-moz-document url-prefix() { div.inner_cell { overflow-x: hidden; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ padding: 0.4em; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */ /* .CodeMirror-lines */ padding: 0; border: 0; border-radius: 0; } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html td, .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } .highlight .hll { background-color: #ffffcc } .highlight { background: #f8f8f8; } .highlight .c { color: #408080; font-style: italic } /* Comment */ .highlight .err { border: 1px solid #FF0000 } /* Error */ .highlight .k { color: #008000; font-weight: bold } /* Keyword */ .highlight .o { color: #666666 } /* Operator */ .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight .gd { color: #A00000 } /* Generic.Deleted */ .highlight .ge { font-style: italic } /* Generic.Emph */ .highlight .gr { color: #FF0000 } /* Generic.Error */ .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight .gi { color: #00A000 } /* Generic.Inserted */ .highlight .go { color: #888888 } /* Generic.Output */ .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight .gs { font-weight: bold } /* Generic.Strong */ .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight .gt { color: #0044DD } /* Generic.Traceback */ .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight .kp { color: #008000 } /* Keyword.Pseudo */ .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight .kt { color: #B00040 } /* Keyword.Type */ .highlight .m { color: #666666 } /* Literal.Number */ .highlight .s { color: #BA2121 } /* Literal.String */ .highlight .na { color: #7D9029 } /* Name.Attribute */ .highlight .nb { color: #008000 } /* Name.Builtin */ .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight .no { color: #880000 } /* Name.Constant */ .highlight .nd { color: #AA22FF } /* Name.Decorator */ .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight .nf { color: #0000FF } /* Name.Function */ .highlight .nl { color: #A0A000 } /* Name.Label */ .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight .nv { color: #19177C } /* Name.Variable */ .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight .w { color: #bbbbbb } /* Text.Whitespace */ .highlight .mb { color: #666666 } /* Literal.Number.Bin */ .highlight .mf { color: #666666 } /* Literal.Number.Float */ .highlight .mh { color: #666666 } /* Literal.Number.Hex */ .highlight .mi { color: #666666 } /* Literal.Number.Integer */ .highlight .mo { color: #666666 } /* Literal.Number.Oct */ .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight .sc { color: #BA2121 } /* Literal.String.Char */ .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight .sx { color: #008000 } /* Literal.String.Other */ .highlight .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight .ss { color: #19177C } /* Literal.String.Symbol */ .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight .vc { color: #19177C } /* Name.Variable.Class */ .highlight .vg { color: #19177C } /* Name.Variable.Global */ .highlight .vi { color: #19177C } /* Name.Variable.Instance */ .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */ /* Temporary definitions which will become obsolete with Notebook release 5.0 */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-bold { font-weight: bold; } In [168]: # Get FTSE100 index back from 01-Jan-1999 import html5lib base_url = 'https://www.google.com/finance/historical?cid=12590587&startdate;=Jan %201% 2C%201999&' + \\ 'enddate=Oct %2015% 2C%202016&num;=200&ei;=qVQCWMmRHMf7UKqMn7AM&start;=' ftse = pd . DataFrame () for page in range ( 0 , 85 , 200 ): #4485 url = base_url + str ( page ) print ( 'getting- ' , url [: 50 ] + '...' + url [ 110 :]) ftse = ftse . append ( pd . read_html ( url , flavor = 'html5lib' , attrs = { 'class' : 'gf-table historical_price' }, parse_dates = [ 0 ], header = 0 )[ 0 ]) ftse . set_index ( 'Date' ) getting- https://www.google.com/finance/historical?cid=1259...num=200&ei;=qVQCWMmRHMf7UKqMn7AM&start;=0 In [182]: ftse . head () Out[182]: Open High Low Close Volume Date 2016-10-14 6977.740 7055.180 6977.740 7013.550 - 2016-10-13 7024.010 7024.010 6930.040 6977.740 - 2016-10-12 7070.880 7079.420 7015.760 7024.010 - 2016-10-11 7097.500 7129.830 7061.360 7070.880 - 2016-10-10 7044.390 7104.490 7024.080 7097.500 - In [56]: % matplotlib inline import quandl import matplotlib.pyplot as plt import seaborn as sns import pandas as pd import numpy as np np . set_printoptions ( supress = True ) pd . set_option ( 'display.float_format' , lambda x : ' %.4f ' % x ) barclays = quandl . get ( \"GOOG/LON_BARC\" , authtoken = \"TMMe4w92TaVmnEgC1D6z\" ) barclays [ 'Gain' ] = barclays [ 'Close' ] - barclays [ 'Open' ] barclays [ 'Day' ] = barclays . index . dayofweek barclays = barclays [( barclays . Volume != 0 ) & ( barclays . Day != 5 )] barclays . head () Out[56]: Open High Low Close Volume Gain Day Date 1999-01-04 322.0 328.00 319.0 323.0 38524204.0 1.0 0 1999-01-05 322.5 338.25 320.5 326.0 22667444.0 3.5 1 1999-01-06 342.0 361.20 340.0 356.9 33591692.0 14.9 2 1999-01-07 354.1 357.20 325.0 351.9 65948960.0 -2.2 3 1999-01-08 359.0 369.00 334.0 368.0 28346880.0 9.0 4 In [ ]: plt . figure ( figsize = ( 20 , 4 )) plt . subplot ( 1 , 2 , 1 ) barclays . Close . plot () ftse . Close . plot () In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [4]: sns . kdeplot ( barclays [ 'Close' ]); C:\\Users\\Graham\\Anaconda3\\lib\\site-packages\\statsmodels\\nonparametric\\kdetools.py:20: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future y = X[:m/2+1] + np.r_[0,X[m/2+1:],0]*1j In [5]: sns . distplot ( barclays [ 'Close' ]) C:\\Users\\Graham\\Anaconda3\\lib\\site-packages\\statsmodels\\nonparametric\\kdetools.py:20: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future y = X[:m/2+1] + np.r_[0,X[m/2+1:],0]*1j Out[5]: In [6]: sns . lmplot ( 'Open' , 'Close' , data = barclays , fit_reg = False ) Out[6]: In [67]: barclays_gr = barclays . groupby ( 'Day' ) In [75]: barclays_gr . Gain . mean () Out[75]: Day 0 -0.508 1 0.054 2 0.126 3 -0.401 4 -0.316 Name: Gain, dtype: float64 In [109]: plt . figure ( figsize = ( 14 , 4 )) plt . subplot ( 1 , 2 , 1 ) barclays_gr . Gain . mean () . plot ( kind = 'bar' ) plt . subplot ( 1 , 2 , 2 ) barclays_gr . Volume . mean () . plot ( kind = 'bar' ) Out[109]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [ ]: In [116]: import pandas_datareader.data as web import datetime start = datetime . datetime ( 2010 , 1 , 1 ) end = datetime . datetime ( 2013 , 1 , 27 ) f1 = web . DataReader ( \"GOOG\" , 'yahoo' , start , end ) #f2 = web.DataReader(\"INDEXFTSE:UKX\", 'google', start, end) In [1]: % matplotlib inline import numpy as np import matplotlib.pyplot as plt from scipy import signal t = np . linspace ( 0 , 5 , 100 ) x = t + np . random . normal ( size = 100 ) xde = signal . detrend ( x ) diff = x - xde plt . plot ( t , x , linewidth = 1 ) plt . plot ( t , xde , linewidth = 1 ) plt . plot ( t , diff , linewidth = 1 ) Out[1]: [ ] In [ ]: % matplotlib notebook import matplotlib.pyplot as plt import matplotlib.dates as mdates import matplotlib.animation as animation import requests import time import datetime as dt from IPython.display import display from ipywidgets import widgets def get_price ( ticker ): resp = requests . get ( r\"http://finance.yahoo.com/webservice/v1/symbols/ {} /quote?format=json\" \\ . format ( ticker ), headers = { 'User-Agent' : 'Mozilla/5.0' }) . json () return float ( resp [ 'list' ][ 'resources' ][ 0 ][ 'resource' ][ 'fields' ][ 'price' ]) def animate ( frame ): global x , y x . append ( dt . datetime . now () ) price = get_price ( ticker ) y . append ( price ) ax . set_xlim ([ max ( x ) - dt . timedelta ( seconds = 65 ), max ( x )]) ax . set_ylim ([ min ( y ) * 0.99999 , max ( y ) * 1.00001 ]) line . set_data ( x , y ) message = ' {} {} ' . format ( ticker , price ) widget . value = ' {} => {} ' . format ( dt . datetime . now (), message ) time . sleep ( 2 ) return line , ticker = 'GBPUSD=X' fig = plt . figure ( num = 'Yahoo Finance Ticker: ' + ticker ) ax = plt . axes () ax . grid ( True ) ax . get_yaxis () . get_major_formatter () . set_useOffset ( False ) fig . autofmt_xdate () time_locator = mdates . SecondLocator ( interval = 5 ) time_fmt = mdates . DateFormatter ( '%H:%M:%S' ) ax . xaxis . set_major_locator ( time_locator ) ax . xaxis . set_major_formatter ( time_fmt ) line , = ax . plot ([], [], lw = 1 ) x = [] y = [] widget = widgets . HTML ( value = '' ) display ( widget ) anim = animation . FuncAnimation ( fig , animate , repeat = False , frames = 30 , interval = 50 , blit = False ) plt . show () if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var mathjaxscript = document.createElement('script'); mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: 'center',\" + \" displayIndent: '0em',\" + \" showMathMenu: true,\" + \" tex2jax: { \" + \" inlineMath: [ ['$','$'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }\" + \" } \" + \"}); \"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }"}]}